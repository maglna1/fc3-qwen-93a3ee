(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9704],{24333:function(e,t,s){"use strict";var n,r,i=s(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}t.Z=function(e){return i.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),n||(n=i.createElement("defs",null,i.createElement("path",{id:"clear_svg__a",d:"M0 0h16v16H0z"}))),i.createElement("g",null,r||(r=i.createElement("mask",{id:"clear_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#clear_svg__a"}))),i.createElement("g",{mask:"url(#clear_svg__b)"},i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2.667 5)",d:"M1 9.67h8.67l1-9.67H0l1 9.67Z"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(6.667 8.334)",d:"M0 0v3.33"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(9.334 8.333)",d:"M0 0v3.33"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(4 1)",d:"m0 4 5.44-4L8 4"}))))}},84193:function(e,t,s){"use strict";var n,r,i=s(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}t.Z=function(e){return i.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),n||(n=i.createElement("defs",null,i.createElement("path",{id:"copy_svg__a",d:"M0 0h16v16H0z"}))),i.createElement("g",null,r||(r=i.createElement("mask",{id:"copy_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#copy_svg__a"}))),i.createElement("g",{mask:"url(#copy_svg__b)"},i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M0 2.48V.94C0 .42.42 0 .94 0h8.12c.52 0 .94.42.94.94v8.12c0 .52-.42.94-.94.94H7.51",transform:"translate(4.333 1.667)"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M.94 0C.42 0 0 .42 0 .94v8.12c0 .52.42.94.94.94h8.12c.52 0 .94-.42.94-.94V.94C10 .42 9.58 0 9.06 0H.94Z",transform:"translate(1.667 4.333)"}))))}},12154:function(e,t,s){"use strict";var n,r,i=s(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}t.Z=function(e){return i.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),n||(n=i.createElement("defs",null,i.createElement("path",{id:"edit_svg__a",d:"M0 0h16v16H0z"}))),i.createElement("g",null,r||(r=i.createElement("mask",{id:"edit_svg__b",fill:"#fff"},i.createElement("use",{xlinkHref:"#edit_svg__a"}))),i.createElement("g",{mask:"url(#edit_svg__b)"},i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(10.5 11)",d:"M2.83 0v3c0 .37-.3.67-.66.67H0"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2.667 1.333)",d:"M10.67 4V.67c0-.37-.3-.67-.67-.67H.67C.3 0 0 .3 0 .67v12c0 .36.3.66.67.66h2"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(5.333 5.333)",d:"M0 0h4.67"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(7.667 7.667)",d:"m0 7 5.67-7"}),i.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(5.333 8)",d:"M0 0h2.67"}))))}},4392:function(e,t,s){"use strict";function asArray(e){return[].concat(e)}function isPsuedoSelector(e){return e.startsWith(":")}function isStyleCondition(e){return isString(e)&&("*"===e||e.length>1&&":>~.+*".includes(e.slice(0,1))||isImmediatePostcondition(e))}function isValidProperty(e,t){return(isString(t)||"number"==typeof t)&&"--"!==e&&!isPsuedoSelector(e)&&!isMediaQuery(e)}function isMediaQuery(e){return e.startsWith("@media")}function isString(e){return e+""===e}function isImmediatePostcondition(e){return isString(e)&&(e.startsWith("&")||isPsuedoSelector(e))}function joinTruthy(e,t=""){return e.filter(Boolean).join(t)}function stableHash(e,t){let s=0;if(0===t.length)return s.toString();for(let e=0;e<t.length;e++){let n=t.charCodeAt(e);s=(s<<5)-s+n,s&=s}return`${e??"cl"}_${s.toString(36)}`}s.d(t,{S:function(){return createSheet},cx:function(){return function cx(...e){let t=e.reduce((e,t)=>(t instanceof Set?e.push(...t):"string"==typeof t?e.push(t):Array.isArray(t)?e.push(cx(...t)):"object"==typeof t&&Object.entries(t).forEach(([t,s])=>{s&&e.push(t)}),e),[]);return joinTruthy(t," ").trim()}}});var n=class _Rule{constructor(e,t,s,n){this.sheet=e,this.property=t,this.value=s,this.selector=n,this.property=t,this.value=s,this.joined=`${t}:${s}`;let r=this.selector.preconditions.concat(this.selector.postconditions);this.hash=this.selector.hasConditions?this.selector.scopeClassName:stableHash(this.sheet.name,this.joined),this.key=joinTruthy([this.joined,r,this.hash])}toString(){let e=mergeSelectors(this.selector.preconditions,{right:this.hash});return e=mergeSelectors(this.selector.postconditions,{left:e}),`${e} {${_Rule.genRule(this.property,this.value)}}`}static genRule(e,t){var s;let n=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return s="content"===e?`"${t}"`:t,`${n}:${s};`}};function mergeSelectors(e,{left:t="",right:s=""}={}){let n=e.reduce((e,t)=>isPsuedoSelector(t)?e+t:isImmediatePostcondition(t)?e+t.slice(1):joinTruthy([e,t]," "),t);return joinTruthy([n,s?`.${s}`:""]," ")}var r=class _Selector{constructor(e,t=null,{preconditions:s,postconditions:n}={}){this.sheet=e,this.preconditions=[],this.scopeClassName=null,this.scopeName=null,this.postconditions=[],this.preconditions=s?asArray(s):[],this.postconditions=n?asArray(n):[],this.setScope(t)}setScope(e){return e&&(this.scopeClassName||(this.scopeName=e,this.scopeClassName=stableHash(this.sheet.name,e+this.sheet.count))),this}get hasConditions(){return this.preconditions.length>0||this.postconditions.length>0}addScope(e){return new _Selector(this.sheet,e,{preconditions:this.preconditions,postconditions:this.postconditions})}addPrecondition(e){return new _Selector(this.sheet,this.scopeClassName,{postconditions:this.postconditions,preconditions:this.preconditions.concat(e)})}addPostcondition(e){return new _Selector(this.sheet,this.scopeClassName,{preconditions:this.preconditions,postconditions:this.postconditions.concat(e)})}createRule(e,t){return new n(this.sheet,e,t,this)}},i=class{constructor(e,t){this.name=e,this.rootNode=t,this.storedStyles={},this.storedClasses={},this.style="",this.count=0,this.id=`flairup-${e}`,this.styleTag=this.createStyleTag()}getStyle(){return this.style}append(e){var t;this.style=(t=this.style)?`${t}
${e}`:e}apply(){this.count++,this.styleTag&&(this.styleTag.innerHTML=this.style)}isApplied(){return!!this.styleTag}createStyleTag(){if("undefined"==typeof document||this.isApplied()||null===this.rootNode)return this.styleTag;let e=document.createElement("style");return e.type="text/css",e.id=this.id,(this.rootNode??document.head).appendChild(e),e}addRule(e){let t=this.storedClasses[e.key];return isString(t)?t:(this.storedClasses[e.key]=e.hash,this.storedStyles[e.hash]=[e.property,e.value],this.append(e.toString()),e.hash)}};function forIn(e,t){for(let s in e)t(s.trim(),e[s])}function createSheet(e,t){let s=new i(e,t);return{create:function(e){let t={};return(function iteratePreconditions(e,t,s){let n=[];return forIn(t,(r,i)=>{if(isStyleCondition(r))return iteratePreconditions(e,i,s.addPrecondition(r)).forEach(e=>n.push(e));n.push([r,t[r],s.addScope(r)])}),n})(s,e,new r(s)).forEach(([e,r,i])=>{(function iterateStyles(e,t,s){let r=new Set;return forIn(t,(t,i)=>{let a=[];if(isStyleCondition(t))a=iterateStyles(e,i,s.addPostcondition(t));else if("."===t)a=asArray(i);else if(isMediaQuery(t))a=function(e,t,s,n){e.append(s+" {");let r=iterateStyles(e,t,n);return e.append("}"),r}(e,i,t,s);else if("--"===t)a=function(e,t,s){let r=new Set,i=[];if(forIn(t,(t,a)=>{if(isValidProperty(t,a)){i.push(n.genRule(t,a));return}let o=iterateStyles(e,a??{},s);addEachClass(o,r)}),!s.scopeClassName)return r;if(i.length){let t=i.join(" ");e.append(`${mergeSelectors(s.preconditions,{right:s.scopeClassName})} {${t}}`)}return r.add(s.scopeClassName),r}(e,i,s);else if(isValidProperty(t,i)){let n=s.createRule(t,i);e.addRule(n),r.add(n.hash)}return addEachClass(a,r)}),r})(s,r,i).forEach(s=>{t[e]=t[e]??new Set,t[e].add(s)})}),s.apply(),t},getStyle:s.getStyle.bind(s),isApplied:s.isApplied.bind(s)}}function addEachClass(e,t){return e.forEach(e=>t.add(e)),t}},85984:function(e,t,s){"use strict";s.d(t,{qE:function(){return Avatar},aR:function(){return AvatarPicker},eL:function(){return EmojiAvatar}});var n,r,i,a,o,l,c,d,u=s(57437),h=s(77870),p=s(90952);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var bot=function(e){return p.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:30,height:30,fill:"none"},e),n||(n=p.createElement("defs",null,p.createElement("path",{id:"bot_svg__a",d:"M0 0h30v30H0z"}),p.createElement("path",{id:"bot_svg__c",d:"M0 0h20.455v20.455H0z"}))),p.createElement("g",null,r||(r=p.createElement("rect",{fill:"#E7F8FF",width:30,height:30,rx:10})),i||(i=p.createElement("mask",{id:"bot_svg__b",fill:"#fff"},p.createElement("use",{xlinkHref:"#bot_svg__a"}))),p.createElement("g",{mask:"url(#bot_svg__b)"},p.createElement("g",{transform:"translate(4.773 4.773)"},a||(a=p.createElement("mask",{id:"bot_svg__d",fill:"#fff"},p.createElement("use",{xlinkHref:"#bot_svg__c"}))),p.createElement("g",{mask:"url(#bot_svg__d)"},p.createElement("path",{fillRule:"evenodd",style:{fill:"#1f948c"},d:"M19.11 8.37c.17-.52.26-1.06.26-1.61 0-.9-.24-1.79-.71-2.57a5.24 5.24 0 0 0-4.53-2.59c-.37 0-.73.04-1.09.11A5.201 5.201 0 0 0 9.17 0h-.04C6.86 0 4.86 1.44 4.16 3.57A5.11 5.11 0 0 0 .71 6.04C.24 6.83 0 7.72 0 8.63c0 1.27.48 2.51 1.35 3.45-.18.52-.27 1.07-.27 1.61 0 .91.25 1.8.71 2.58 1.13 1.94 3.41 2.94 5.63 2.47a5.18 5.18 0 0 0 3.86 1.71h.05c2.26 0 4.27-1.44 4.97-3.57a5.132 5.132 0 0 0 3.45-2.47c.46-.78.7-1.67.7-2.58 0-1.28-.48-2.51-1.34-3.46ZM8.947 18.158c-.04.03-.08.05-.12.07.7.58 1.57.89 2.48.89h.01c2.14 0 3.88-1.72 3.88-3.83v-4.76c0-.02-.02-.04-.04-.05l-1.74-.99v5.75c0 .23-.13.45-.34.57l-4.13 2.35Zm-.67-1.153 4.17-2.38c.02-.01.03-.03.03-.05v-1.99l-5.04 2.87c-.21.12-.47.12-.68 0l-4.13-2.35c-.04-.02-.09-.06-.12-.07-.04.21-.06.43-.06.65 0 .67.18 1.33.52 1.92v-.01c.7 1.19 1.98 1.92 3.37 1.92.68 0 1.35-.18 1.94-.51ZM3.903 5.168v-.14c-.85.31-1.57.9-2.02 1.68a3.78 3.78 0 0 0-.52 1.91c0 1.37.74 2.64 1.94 3.33l4.17 2.37c.02.01.04.01.06 0l1.75-1-5.04-2.87a.64.64 0 0 1-.34-.57v-4.71Zm13.253 3.337-4.18-2.38c-.02 0-.04 0-.06.01l-1.74.99 5.04 2.87c.21.12.34.34.34.58v4.85c1.52-.56 2.54-1.99 2.54-3.6 0-1.37-.74-2.63-1.94-3.32ZM8.014 5.83c-.02.01-.03.03-.03.05v1.99L13.024 5a.692.692 0 0 1 .68 0l4.13 2.35c.04.02.08.05.12.07.03-.21.05-.43.05-.65 0-2.11-1.74-3.83-3.88-3.83-.68 0-1.35.18-1.94.51l-4.17 2.38Zm1.133-4.492c-2.15 0-3.89 1.72-3.89 3.83v4.76c0 .02.02.03.03.04l1.75 1v-5.75c0-.23.13-.45.34-.57l4.13-2.35c.04-.03.09-.06.12-.07-.7-.58-1.58-.89-2.48-.89ZM7.983 11.51l2.24 1.27 2.25-1.27V8.95l-2.25-1.28-2.24 1.28v2.56Z"}))))))};function black_bot_extends(){return(black_bot_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var black_bot=function(e){return p.createElement("svg",black_bot_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:30,height:30,fill:"none"},e),o||(o=p.createElement("defs",null,p.createElement("path",{id:"black-bot_svg__a",d:"M0 0h30v30H0z"}),p.createElement("path",{id:"black-bot_svg__c",d:"M0 0h20.455v20.455H0z"}))),p.createElement("g",null,l||(l=p.createElement("rect",{width:30,height:30,fill:"#E7F8FF",rx:10})),c||(c=p.createElement("mask",{id:"black-bot_svg__b",fill:"#fff"},p.createElement("use",{xlinkHref:"#black-bot_svg__a"}))),p.createElement("g",{mask:"url(#black-bot_svg__b)"},p.createElement("g",{transform:"translate(4.773 4.773)"},d||(d=p.createElement("mask",{id:"black-bot_svg__d",fill:"#fff"},p.createElement("use",{xlinkHref:"#black-bot_svg__c"}))),p.createElement("g",{mask:"url(#black-bot_svg__d)"},p.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},d:"M19.11 8.37c.17-.52.26-1.06.26-1.61 0-.9-.24-1.79-.71-2.57a5.24 5.24 0 0 0-4.53-2.59c-.37 0-.73.04-1.09.11A5.201 5.201 0 0 0 9.17 0h-.04C6.86 0 4.86 1.44 4.16 3.57A5.11 5.11 0 0 0 .71 6.04C.24 6.83 0 7.72 0 8.63c0 1.27.48 2.51 1.35 3.45-.18.52-.27 1.07-.27 1.61 0 .91.25 1.8.71 2.58 1.13 1.94 3.41 2.94 5.63 2.47a5.18 5.18 0 0 0 3.86 1.71h.05c2.26 0 4.27-1.44 4.97-3.57a5.132 5.132 0 0 0 3.45-2.47c.46-.78.7-1.67.7-2.58 0-1.28-.48-2.51-1.34-3.46ZM8.947 18.158c-.04.03-.08.05-.12.07.7.58 1.57.89 2.48.89h.01c2.14 0 3.88-1.72 3.88-3.83v-4.76c0-.02-.02-.04-.04-.05l-1.74-.99v5.75c0 .23-.13.45-.34.57l-4.13 2.35Zm-.67-1.153 4.17-2.38c.02-.01.03-.03.03-.05v-1.99l-5.04 2.87c-.21.12-.47.12-.68 0l-4.13-2.35c-.04-.02-.09-.06-.12-.07-.04.21-.06.43-.06.65 0 .67.18 1.33.52 1.92v-.01c.7 1.19 1.98 1.92 3.37 1.92.68 0 1.35-.18 1.94-.51ZM3.903 5.168v-.14c-.85.31-1.57.9-2.02 1.68a3.78 3.78 0 0 0-.52 1.91c0 1.37.74 2.64 1.94 3.33l4.17 2.37c.02.01.04.01.06 0l1.75-1-5.04-2.87a.64.64 0 0 1-.34-.57v-4.71Zm13.253 3.337-4.18-2.38c-.02 0-.04 0-.06.01l-1.74.99 5.04 2.87c.21.12.34.34.34.58v4.85c1.52-.56 2.54-1.99 2.54-3.6 0-1.37-.74-2.63-1.94-3.32ZM8.014 5.83c-.02.01-.03.03-.03.05v1.99L13.024 5a.692.692 0 0 1 .68 0l4.13 2.35c.04.02.08.05.12.07.03-.21.05-.43.05-.65 0-2.11-1.74-3.83-3.88-3.83-.68 0-1.35.18-1.94.51l-4.17 2.38Zm1.133-4.492c-2.15 0-3.89 1.72-3.89 3.83v4.76c0 .02.02.03.03.04l1.75 1v-5.75c0-.23.13-.45.34-.57l4.13-2.35c.04-.03.09-.06.12-.07-.7-.58-1.58-.89-2.48-.89ZM7.983 11.51l2.24 1.27 2.25-1.27V8.95l-2.25-1.28-2.24 1.28v2.56Z"}))))))};function getEmojiUrl(e,t){return"https://cdn.staticfile.org/emoji-datasource-apple/14.0.0/img/".concat(t,"/64/").concat(e,".png")}function AvatarPicker(e){return(0,u.jsx)(h.ZP,{lazyLoadEmojis:!0,theme:h.Q2.AUTO,getEmojiUrl:getEmojiUrl,onEmojiClick:t=>{e.onEmojiClick(t.unified)}})}function Avatar(e){if(e.model){var t;return(0,u.jsx)("div",{className:"no-dark",children:(null===(t=e.model)||void 0===t?void 0:t.startsWith("gpt-4"))?(0,u.jsx)(black_bot,{className:"user-avatar"}):(0,u.jsx)(bot,{className:"user-avatar"})})}return(0,u.jsx)("div",{className:"user-avatar",children:e.avatar&&(0,u.jsx)(EmojiAvatar,{avatar:e.avatar})})}function EmojiAvatar(e){var t;return(0,u.jsx)(h.dy,{unified:e.avatar,size:null!==(t=e.size)&&void 0!==t?t:18,getEmojiUrl:getEmojiUrl})}},11086:function(e,t,s){"use strict";s.d(t,{O:function(){return InputRange}});var n=s(57437);s(2265);var r=s(42521),i=s.n(r);function InputRange(e){let{onChange:t,title:s,value:r,className:a,min:o,max:l,step:c}=e;return(0,n.jsxs)("div",{className:i()["input-range"]+" ".concat(null!=a?a:""),children:[s||r,(0,n.jsx)("input",{type:"range",title:s,value:r,min:o,max:l,step:c,onChange:t})]})}},32300:function(e,t,s){"use strict";s.d(t,{j:function(){return ModelConfigList}});var n=s(57437),r=s(19046),i=s(63977),a=s(11086),o=s(37352);function ModelConfigList(e){return(0,r.MG)(),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.HC,{title:i.ZP.Settings.MaxTokens.Title,subTitle:i.ZP.Settings.MaxTokens.SubTitle,children:(0,n.jsx)("input",{type:"number",min:100,max:1e5,value:e.modelConfig.max_tokens,onChange:t=>e.updateConfig(e=>e.max_tokens=r.Xm.max_tokens(t.currentTarget.valueAsNumber))})}),(0,n.jsx)(o.HC,{title:i.ZP.Settings.InjectSystemPrompts.Title,subTitle:i.ZP.Settings.InjectSystemPrompts.SubTitle,children:(0,n.jsx)("input",{type:"checkbox",checked:e.modelConfig.enableInjectSystemPrompts,onChange:t=>e.updateConfig(e=>e.enableInjectSystemPrompts=t.currentTarget.checked)})}),(0,n.jsx)(o.HC,{title:i.ZP.Settings.InputTemplate.Title,subTitle:i.ZP.Settings.InputTemplate.SubTitle,children:(0,n.jsx)("input",{type:"text",value:e.modelConfig.template,onChange:t=>e.updateConfig(e=>e.template=t.currentTarget.value)})}),(0,n.jsx)(o.HC,{title:i.ZP.Settings.HistoryCount.Title,subTitle:i.ZP.Settings.HistoryCount.SubTitle,children:(0,n.jsx)(a.O,{title:e.modelConfig.historyMessageCount.toString(),value:e.modelConfig.historyMessageCount,min:"0",max:"64",step:"1",onChange:t=>e.updateConfig(e=>e.historyMessageCount=t.target.valueAsNumber)})}),(0,n.jsx)(o.HC,{title:i.ZP.Settings.CompressThreshold.Title,subTitle:i.ZP.Settings.CompressThreshold.SubTitle,children:(0,n.jsx)("input",{type:"number",min:500,max:4e3,value:e.modelConfig.compressMessageLengthThreshold,onChange:t=>e.updateConfig(e=>e.compressMessageLengthThreshold=t.currentTarget.valueAsNumber)})}),(0,n.jsx)(o.HC,{title:i.ZP.Memory.Title,subTitle:i.ZP.Memory.Send,children:(0,n.jsx)("input",{type:"checkbox",checked:e.modelConfig.sendMemory,onChange:t=>e.updateConfig(e=>e.sendMemory=t.currentTarget.checked)})})]})}},43484:function(e,t,s){"use strict";s.r(t),s.d(t,{Settings:function(){return Settings}});var n=s(57437),r=s(2265),i=s(74812),a=s.n(i);s(98829);var o=s(58870),l=s(38669),c=s(84193),d=s(24333),u=s(12154),h=s(56073),p=s(37352),m=s(32300),g=s(82586),v=s(19046),f=s(63977),x=s(35069),b=s(378),y=s(50520),_=s(25090),k=s(11086),j=s(5954),S=s(85984),C=s(163),P=s(94660),E=s(74810);let w=(0,P.Ue)()((0,E.tJ)((e,t)=>({webDavConfig:{server:"",username:"",password:""},lastSyncTime:0,update(s){let n={...t().webDavConfig};s(n),e({webDavConfig:n})},async check(){try{let e=await fetch(this.path(""),{method:"PROFIND",headers:this.headers()});return 207===e.status}catch(e){return console.error("[Sync] ",e),!1}},path(e){let s=t().webDavConfig.server;return s.endsWith("/")||(s+="/"),e.startsWith("/")&&(e=e.slice(1)),s+e},headers(){let e=btoa([t().webDavConfig.username,t().webDavConfig.password].join(":"));return{Authorization:"Basic ".concat(e)}}}),{name:b.KJ.Sync,version:1}));var T=s(28481);function EditPromptModal(e){let t=(0,y.f)(),s=t.get(e.id);return s?(0,n.jsx)("div",{className:"modal-mask",children:(0,n.jsx)(p.u_,{title:f.ZP.Settings.Prompt.EditModal.Title,onClose:e.onClose,actions:[(0,n.jsx)(g.h,{onClick:e.onClose,text:f.ZP.UI.Confirm,bordered:!0},"")],children:(0,n.jsxs)("div",{className:a()["edit-prompt-modal"],children:[(0,n.jsx)("input",{type:"text",value:s.title,readOnly:!s.isUser,className:a()["edit-prompt-title"],onInput:s=>t.update(e.id,e=>e.title=s.currentTarget.value)}),(0,n.jsx)(p.II,{value:s.content,readOnly:!s.isUser,className:a()["edit-prompt-content"],rows:10,onInput:s=>t.update(e.id,e=>e.content=s.currentTarget.value)})]})})}):null}function UserPromptModal(e){let t=(0,y.f)(),s=t.getUserPrompts(),i=y.o.builtinPrompts,l=s.concat(i),[m,v]=(0,r.useState)(""),[b,_]=(0,r.useState)([]),k=m.length>0?b:l,[j,S]=(0,r.useState)();return(0,r.useEffect)(()=>{if(m.length>0){let e=y.o.search(m);_(e)}else _([])},[m]),(0,n.jsxs)("div",{className:"modal-mask",children:[(0,n.jsx)(p.u_,{title:f.ZP.Settings.Prompt.Modal.Title,onClose:()=>{var t;return null===(t=e.onClose)||void 0===t?void 0:t.call(e)},actions:[(0,n.jsx)(g.h,{onClick:()=>t.add({id:(0,T.x0)(),createdAt:Date.now(),title:"Empty Prompt",content:"Empty Prompt Content"}),icon:(0,n.jsx)(o.Z,{}),bordered:!0,text:f.ZP.Settings.Prompt.Modal.Add},"add")],children:(0,n.jsxs)("div",{className:a()["user-prompt-modal"],children:[(0,n.jsx)("input",{type:"text",className:a()["user-prompt-search"],placeholder:f.ZP.Settings.Prompt.Modal.Search,value:m,onInput:e=>v(e.currentTarget.value)}),(0,n.jsx)("div",{className:a()["user-prompt-list"],children:k.map((e,s)=>{var r;return(0,n.jsxs)("div",{className:a()["user-prompt-item"],children:[(0,n.jsxs)("div",{className:a()["user-prompt-header"],children:[(0,n.jsx)("div",{className:a()["user-prompt-title"],children:e.title}),(0,n.jsx)("div",{className:a()["user-prompt-content"]+" one-line",children:e.content})]}),(0,n.jsxs)("div",{className:a()["user-prompt-buttons"],children:[e.isUser&&(0,n.jsx)(g.h,{icon:(0,n.jsx)(d.Z,{}),className:a()["user-prompt-button"],onClick:()=>t.remove(e.id)}),e.isUser?(0,n.jsx)(g.h,{icon:(0,n.jsx)(u.Z,{}),className:a()["user-prompt-button"],onClick:()=>S(e.id)}):(0,n.jsx)(g.h,{icon:(0,n.jsx)(h.Z,{}),className:a()["user-prompt-button"],onClick:()=>S(e.id)}),(0,n.jsx)(g.h,{icon:(0,n.jsx)(c.Z,{}),className:a()["user-prompt-button"],onClick:()=>(0,x.vQ)(e.content)})]})]},null!==(r=e.id)&&void 0!==r?r:e.title)})})]})}),void 0!==j&&(0,n.jsx)(EditPromptModal,{id:j,onClose:()=>S(void 0)})]})}function DangerItems(){let e=(0,v.aK)(),t=(0,v.MG)();return(0,n.jsxs)(p.aV,{children:[(0,n.jsx)(p.HC,{title:f.ZP.Settings.Danger.Reset.Title,subTitle:f.ZP.Settings.Danger.Reset.SubTitle,children:(0,n.jsx)(g.h,{text:f.ZP.Settings.Danger.Reset.Action,onClick:async()=>{await (0,p.i0)(f.ZP.Settings.Danger.Reset.Confirm)&&t.reset()},type:"danger"})}),(0,n.jsx)(p.HC,{title:f.ZP.Settings.Danger.Clear.Title,subTitle:f.ZP.Settings.Danger.Clear.SubTitle,children:(0,n.jsx)(g.h,{text:f.ZP.Settings.Danger.Clear.Action,onClick:async()=>{await (0,p.i0)(f.ZP.Settings.Danger.Clear.Confirm)&&e.clearAllData()},type:"danger"})})]})}function SyncItems(){let e=w();return e.webDavConfig,null}function Settings(){var e,t,s;let i=(0,j.s0)(),[o,c]=(0,r.useState)(!1),d=(0,v.MG)(),h=d.update,x=(0,v.u2)(),[P,E]=(0,r.useState)(!1);x.formatVersion(x.version),x.formatVersion(x.remoteVersion),(null===(e=(0,C.Z)())||void 0===e?void 0:e.isApp)?b.cr:b.Cs,x.used,x.subscription;let[w,T]=(0,r.useState)(!1),Z=(0,v._X)(),M=(0,r.useMemo)(()=>Z.enabledAccessControl(),[]),N=(0,y.f)(),A=y.o.count.builtin,H=null!==(t=N.getUserPrompts().length)&&void 0!==t?t:0,[O,D]=(0,r.useState)(!1),I=Z.isAuthorized();(0,r.useEffect)(()=>{(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];E(!0),x.getLatestVersion(e).then(()=>{E(!1)}),console.log("[Update] local version ",x.version),console.log("[Update] remote version ",x.remoteVersion)})(),I&&function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Z.hideBalanceQuery||(T(!0),x.updateUsage(e).finally(()=>{T(!1)}))}()},[]),(0,r.useEffect)(()=>{let keydownEvent=e=>{"Escape"===e.key&&i(b.y$.Home)};return document.addEventListener("keydown",keydownEvent),()=>{document.removeEventListener("keydown",keydownEvent)}},[]);let R=(0,r.useMemo)(()=>(0,C.Z)(),[]),U=M&&!(null==R?void 0:R.isApp);return(0,n.jsxs)(_.S,{children:[(0,n.jsxs)("div",{className:"window-header","data-tauri-drag-region":!0,children:[(0,n.jsxs)("div",{className:"window-header-title",children:[(0,n.jsx)("div",{className:"window-header-main-title",children:f.ZP.Settings.Title}),(0,n.jsx)("div",{className:"window-header-sub-title",children:f.ZP.Settings.SubTitle})]}),(0,n.jsxs)("div",{className:"window-actions",children:[(0,n.jsx)("div",{className:"window-action-button"}),(0,n.jsx)("div",{className:"window-action-button"}),(0,n.jsx)("div",{className:"window-action-button",children:(0,n.jsx)(g.h,{icon:(0,n.jsx)(l.Z,{}),onClick:()=>i(b.y$.Home),bordered:!0})})]})]}),(0,n.jsxs)("div",{className:a().settings,children:[(0,n.jsxs)(p.aV,{children:[(0,n.jsx)(p.HC,{title:f.ZP.Settings.Avatar,children:(0,n.jsx)(p.J2,{onClose:()=>c(!1),content:(0,n.jsx)(S.aR,{onEmojiClick:e=>{h(t=>t.avatar=e),c(!1)}}),open:o,children:(0,n.jsx)("div",{className:a().avatar,onClick:()=>c(!0),children:(0,n.jsx)(S.qE,{avatar:d.avatar})})})}),(0,n.jsx)(p.HC,{title:f.ZP.Settings.SendKey,children:(0,n.jsx)(p.Ph,{value:d.submitKey,onChange:e=>{h(t=>t.submitKey=e.target.value)},children:Object.values(v.mQ).map(e=>(0,n.jsx)("option",{value:e,children:e},e))})}),(0,n.jsx)(p.HC,{title:f.ZP.Settings.Theme,children:(0,n.jsx)(p.Ph,{value:d.theme,onChange:e=>{h(t=>t.theme=e.target.value)},children:Object.values(v.Q2).map(e=>(0,n.jsx)("option",{value:e,children:e},e))})}),(0,n.jsx)(p.HC,{title:f.ZP.Settings.FontSize.Title,subTitle:f.ZP.Settings.FontSize.SubTitle,children:(0,n.jsx)(k.O,{title:"".concat(null!==(s=d.fontSize)&&void 0!==s?s:14,"px"),value:d.fontSize,min:"12",max:"18",step:"1",onChange:e=>h(t=>t.fontSize=Number.parseInt(e.currentTarget.value))})}),(0,n.jsx)(p.HC,{title:f.ZP.Settings.AutoGenerateTitle.Title,subTitle:f.ZP.Settings.AutoGenerateTitle.SubTitle,children:(0,n.jsx)("input",{type:"checkbox",checked:d.enableAutoGenerateTitle,onChange:e=>h(t=>t.enableAutoGenerateTitle=e.currentTarget.checked)})}),(0,n.jsx)(p.HC,{title:f.ZP.Settings.SendPreviewBubble.Title,subTitle:f.ZP.Settings.SendPreviewBubble.SubTitle,children:(0,n.jsx)("input",{type:"checkbox",checked:d.sendPreviewBubble,onChange:e=>h(t=>t.sendPreviewBubble=e.currentTarget.checked)})})]}),(0,n.jsxs)(p.aV,{children:[(0,n.jsx)(p.HC,{title:f.ZP.Settings.Mask.Splash.Title,subTitle:f.ZP.Settings.Mask.Splash.SubTitle,children:(0,n.jsx)("input",{type:"checkbox",checked:!d.dontShowMaskSplashScreen,onChange:e=>h(t=>t.dontShowMaskSplashScreen=!e.currentTarget.checked)})}),(0,n.jsx)(p.HC,{title:f.ZP.Settings.Mask.Builtin.Title,subTitle:f.ZP.Settings.Mask.Builtin.SubTitle,children:(0,n.jsx)("input",{type:"checkbox",checked:d.hideBuiltinMasks,onChange:e=>h(t=>t.hideBuiltinMasks=e.currentTarget.checked)})})]}),(0,n.jsxs)(p.aV,{children:[(0,n.jsx)(p.HC,{title:f.ZP.Settings.Prompt.Disable.Title,subTitle:f.ZP.Settings.Prompt.Disable.SubTitle,children:(0,n.jsx)("input",{type:"checkbox",checked:d.disablePromptHint,onChange:e=>h(t=>t.disablePromptHint=e.currentTarget.checked)})}),(0,n.jsx)(p.HC,{title:f.ZP.Settings.Prompt.List,subTitle:f.ZP.Settings.Prompt.ListCount(A,H),children:(0,n.jsx)(g.h,{icon:(0,n.jsx)(u.Z,{}),text:f.ZP.Settings.Prompt.Edit,onClick:()=>D(!0)})})]}),(0,n.jsx)(p.aV,{children:U?(0,n.jsx)(p.HC,{title:f.ZP.Settings.AccessCode.Title,subTitle:f.ZP.Settings.AccessCode.SubTitle,children:(0,n.jsx)(p.WU,{value:Z.accessCode,type:"text",placeholder:f.ZP.Settings.AccessCode.Placeholder,onChange:e=>{Z.updateCode(e.currentTarget.value)}})}):(0,n.jsx)(n.Fragment,{})}),(0,n.jsx)(SyncItems,{}),(0,n.jsx)(p.aV,{children:(0,n.jsx)(m.j,{modelConfig:d.modelConfig,updateConfig:e=>{let t={...d.modelConfig};e(t),d.update(e=>e.modelConfig=t)}})}),O&&(0,n.jsx)(UserPromptModal,{onClose:()=>D(!1)}),(0,n.jsx)(DangerItems,{})]})]})}},50520:function(e,t,s){"use strict";s.d(t,{f:function(){return d},o:function(){return c}});var n=s(94660),r=s(74810),i=s(68970),a=s(63977),o=s(378),l=s(28481);let c={ready:!1,builtinEngine:new i.Z([],{keys:["title"]}),userEngine:new i.Z([],{keys:["title"]}),count:{builtin:0},allPrompts:[],builtinPrompts:[],init(e,t){this.ready||(this.allPrompts=t.concat(e),this.builtinPrompts=e.slice(),this.builtinEngine.setCollection(e),this.userEngine.setCollection(t),this.ready=!0)},remove(e){this.userEngine.remove(t=>t.id===e)},add(e){this.userEngine.add(e)},search(e){let t=this.userEngine.search(e),s=this.builtinEngine.search(e);return t.concat(s).map(e=>e.item)}},d=(0,n.Ue)()((0,r.tJ)((e,t)=>({counter:0,latestId:0,prompts:{},add(s){let n=t().prompts;return s.id=(0,l.x0)(),s.isUser=!0,s.createdAt=Date.now(),n[s.id]=s,e(()=>({latestId:s.id,prompts:n})),s.id},get(e){let s=t().prompts[e];return s||c.builtinPrompts.find(t=>t.id===e)},remove(s){let n=t().prompts;delete n[s],c.remove(s),e(()=>({prompts:n,counter:t().counter+1}))},getUserPrompts(){var e;let s=Object.values(null!==(e=t().prompts)&&void 0!==e?e:{});return s.sort((e,t)=>t.id&&e.id?t.createdAt-e.createdAt:0),s},update(s,n){var r;let i=null!==(r=t().prompts[s])&&void 0!==r?r:{title:"",content:"",id:s};c.remove(s),n(i);let a=t().prompts;a[s]=i,e(()=>({prompts:a})),c.add(i)},search:e=>0===e.length?t().getUserPrompts().concat(c.builtinPrompts):c.search(e)}),{name:o.KJ.Prompt,version:3,migrate(e,t){let s=JSON.parse(JSON.stringify(e));return t<3&&Object.values(s.prompts).forEach(e=>e.id=(0,l.x0)()),s},onRehydrateStorage(e){fetch("./prompts.json").then(e=>e.json()).then(e=>{var t;let s=[e.en,e.cn];"cn"===(0,a.VQ)()&&(s=s.reverse());let n=s.map(e=>e.map(e=>{let[t,s]=e;return{id:(0,l.x0)(),title:t,content:s,createdAt:Date.now()}})),r=null!==(t=d.getState().getUserPrompts())&&void 0!==t?t:[],i=n.reduce((e,t)=>e.concat(t),[]).filter(e=>!!e.title&&!!e.content);c.count.builtin=e.en.length+e.cn.length,c.init(i,r)})}}))},42521:function(e){e.exports={"input-range":"input-range_input-range__SuxRd"}},74812:function(e){e.exports={settings:"settings_settings__427bK",avatar:"settings_avatar__jO3Wv","edit-prompt-modal":"settings_edit-prompt-modal__iP1gi","edit-prompt-title":"settings_edit-prompt-title__mq8os","edit-prompt-content":"settings_edit-prompt-content__9i9Y_","user-prompt-modal":"settings_user-prompt-modal__YWssH","user-prompt-search":"settings_user-prompt-search__kskD_","user-prompt-list":"settings_user-prompt-list__BrWRy","user-prompt-item":"settings_user-prompt-item__kh_6Q","user-prompt-header":"settings_user-prompt-header__MBMAf","user-prompt-title":"settings_user-prompt-title__BpRs1","user-prompt-content":"settings_user-prompt-content__CxL3R","user-prompt-buttons":"settings_user-prompt-buttons__y5Hf_","user-prompt-button":"settings_user-prompt-button__efhSx"}}}]);