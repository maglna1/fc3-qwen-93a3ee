exports.id=2265,exports.ids=[2265],exports.modules={32265:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Chat:()=>Chat,ChatActions:()=>ChatActions,EditMessageModal:()=>EditMessageModal,PromptHints:()=>PromptHints,SessionConfigModel:()=>SessionConfigModel});var n,a,r,o,l,i,c,d,m,h,p,u,g,x,f,v,_,w,k,y,j,C,E,b,S,M,P,Z,N=s(30784),O=s(2787),A=s(9885),T=s(98142);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let send_white=function(e){return T.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),n||(n=T.createElement("defs",null,T.createElement("path",{id:"send-white_svg__a",d:"M0 0h16v16H0z"}))),T.createElement("g",null,a||(a=T.createElement("mask",{id:"send-white_svg__b",fill:"#fff"},T.createElement("use",{xlinkHref:"#send-white_svg__a"}))),T.createElement("g",{mask:"url(#send-white_svg__b)"},T.createElement("path",{style:{stroke:"#fff",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 2)",d:"M0 4.71 6.67 6l1.67 6.67L12.67 0 0 4.71Z"}),T.createElement("path",{style:{stroke:"#fff",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(8.003 6.117)",d:"M0 1.89 1.89 0"}))))};function brain_extends(){return(brain_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let brain=function(e){return T.createElement("svg",brain_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),r||(r=T.createElement("defs",null,T.createElement("path",{id:"brain_svg__a",d:"M0 0h16v16H0z"}))),T.createElement("g",null,o||(o=T.createElement("mask",{id:"brain_svg__b",fill:"#fff"},T.createElement("use",{xlinkHref:"#brain_svg__a"}))),T.createElement("g",{mask:"url(#brain_svg__b)"},T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M5.01 13.33c-.32-1.06-.82-1.86-1.48-2.38-.98-.78-2.56-.3-3.14-1.11-.58-.8.41-2.29.76-3.17.34-.88-1.33-1.19-1.13-1.44.13-.16.97-.64 2.53-1.44C3 1.26 4.63 0 7.47 0c4.24 0 5.86 3.6 5.86 5.89 0 2.29-1.96 4.76-4.75 5.29-.25.37.11 1.08 1.08 2.15",transform:"translate(1.333 1.333)"}),T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M2.1 3.33c-.19 1.09.04 1.6.69 1.53.65-.07 1.05-.34 1.18-.81 1.02.28 1.57.04 1.66-.72.12-1.15-.5-2.07-.75-2.07s-.91-.03-.91-.38C3.97.52 3.2.33 2.5.33c-.69 0-.27-.47-1.23-.29C.64.17.26.44.13.88c-.22.84-.16 1.43.19 1.78.35.34.94.56 1.78.67Z",transform:"translate(6.374 3.957)"}),T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M1.97 0c-.34.21-.8.56-1 .83-.49.69-.88 1.1-.97 1.54",transform:"translate(8.193 8.5)"}))))};function rename_extends(){return(rename_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let rename=function(e){return T.createElement("svg",rename_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),l||(l=T.createElement("defs",null,T.createElement("path",{id:"rename_svg__a",d:"M0 0h16v16H0z"}))),T.createElement("g",null,i||(i=T.createElement("mask",{id:"rename_svg__b",fill:"#fff"},T.createElement("use",{xlinkHref:"#rename_svg__a"}))),T.createElement("g",{mask:"url(#rename_svg__b)"},T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.775 1.3)",d:"M2.83 13.2 13.2 2.83 10.37 0 0 10.37v2.83h2.83Z"}),T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(9.317 4.13)",d:"m0 0 2.83 2.83"}))))};function share_extends(){return(share_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let icons_share=function(e){return T.createElement("svg",share_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),c||(c=T.createElement("defs",null,T.createElement("path",{id:"share_svg__a",d:"M0 0h16v16H0z"}))),T.createElement("g",null,d||(d=T.createElement("mask",{id:"share_svg__b",fill:"#fff"},T.createElement("use",{xlinkHref:"#share_svg__a"}))),T.createElement("g",{mask:"url(#share_svg__b)"},T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M6.67 3.67C1.67 3.67 0 7.33 0 13c0 0 2-5 6.67-5v3.67l6-5.67-6-6v3.67Z",transform:"translate(2 1.333)"}))))};function return_extends(){return(return_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let icons_return=function(e){return T.createElement("svg",return_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),m||(m=T.createElement("defs",null,T.createElement("path",{id:"return_svg__a",d:"M0 0h16v16H0z"}))),T.createElement("g",null,h||(h=T.createElement("mask",{id:"return_svg__b",fill:"#fff"},T.createElement("use",{xlinkHref:"#return_svg__a"}))),T.createElement("g",{mask:"url(#return_svg__b)"},T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 2.667)",d:"M2.33 0 0 2l2.33 2.33"}),T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(2 4.667)",d:"M0 0h7.66c2.3 0 4.25 1.87 4.34 4.17.09 2.42-1.91 4.5-4.34 4.5H2"}))))};var D=s(81482),H=s(39866);function prompt_extends(){return(prompt_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let icons_prompt=function(e){return T.createElement("svg",prompt_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),p||(p=T.createElement("defs",null,T.createElement("path",{id:"prompt_svg__a",d:"M0 0h16v16H0z"}))),T.createElement("g",null,u||(u=T.createElement("mask",{id:"prompt_svg__b",fill:"#fff"},T.createElement("use",{xlinkHref:"#prompt_svg__a"}))),T.createElement("g",{mask:"url(#prompt_svg__b)"},T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3,strokeOpacity:1,strokeDasharray:"0 0"},d:"m1.367 1.367 1.41 1.41M4.667 0v2m0 0V0m3.295 1.367-1.41 1.41m0 0 1.41-1.41m1.371 3.3h-2m0 0h2m-1.37 3.295-1.41-1.41m0 0 1.41 1.41M4.666 9.333v-2m0 0v2m-3.3-1.37 1.41-1.41m0 0-1.41 1.41M0 4.666h2m0 0H0",transform:"translate(5.333 1.333)"}),T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8.01 0 0 8.01",transform:"translate(1.848 6.138)"}))))};var I=s(38740),K=s(34423),R=s(66363),W=s(30841);function break_extends(){return(break_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let icons_break=function(e){return T.createElement("svg",break_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),T.createElement("path",{style:{fill:"#333",opacity:1},d:"M13.275-.275c.261.26.392.576.392.945v10.66c0 .37-.131.684-.392.945a1.288 1.288 0 0 1-.945.392H1.67c-.37 0-.684-.13-.945-.392a1.288 1.288 0 0 1-.392-.945V.67c0-.37.13-.684.392-.945.26-.261.576-.392.945-.392h10.66c.369 0 .684.13.945.392zM1.667 11.33c0 .002 0 .003.003.003h10.66c.002 0 .003 0 .003-.003V.67c0-.002 0-.003-.003-.003H1.67c-.002 0-.003 0-.003.003z",transform:"translate(1 2)"}),T.createElement("path",{style:{fill:"#333",opacity:1},d:"M9.763 7.507a.666.666 0 0 1-.867 0L7 5.878 5.104 7.506a.665.665 0 0 1-.867.001L2.331 5.878.434 7.506a.66.66 0 0 1-.485.16.66.66 0 0 1-.53-.338.665.665 0 0 1 .147-.834l2.33-2a.666.666 0 0 1 .867 0L4.67 6.123l1.897-1.629a.666.666 0 0 1 .868 0l1.897 1.629 1.906-1.63a.668.668 0 0 1 .867.002l2.33 2a.66.66 0 0 1 .23.455.661.661 0 0 1-.252.575.666.666 0 0 1-.846-.019l-1.897-1.628z",transform:"translate(1 2)"}),g||(g=T.createElement("g",null,T.createElement("mask",{id:"break_svg__b",fill:"#fff"},T.createElement("use",{xlinkHref:"#break_svg__a"})))),x||(x=T.createElement("defs",null,T.createElement("path",{id:"break_svg__a",d:"M0 0h16v16H0z"}))))};function chat_settings_extends(){return(chat_settings_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let chat_settings=function(e){return T.createElement("svg",chat_settings_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),T.createElement("g",null,f||(f=T.createElement("mask",{id:"chat-settings_svg__b",fill:"#fff"},T.createElement("use",{xlinkHref:"#chat-settings_svg__a"}))),T.createElement("g",{mask:"url(#chat-settings_svg__b)"},T.createElement("path",{style:{fill:"#333",opacity:1},d:"M6.728 14.598a.665.665 0 0 1-.828.434 7.294 7.294 0 0 1-3.187-1.945.666.666 0 0 1-.026-.896c.207-.241.31-.527.31-.857 0-.37-.13-.685-.389-.944A1.286 1.286 0 0 0 1.663 10h-.08a.662.662 0 0 1-.665-.288.665.665 0 0 1-.098-.235 7.234 7.234 0 0 1 .188-3.675.662.662 0 0 1 .635-.465h.02c.37 0 .684-.13.944-.392.26-.26.39-.574.39-.942 0-.215-.045-.415-.134-.6a.666.666 0 0 1 .148-.78A7.292 7.292 0 0 1 6.034.932a.666.666 0 0 1 .774.34c.11.219.272.394.483.524.216.135.454.202.712.202.254 0 .488-.067.703-.201.211-.131.372-.306.483-.524a.666.666 0 0 1 .773-.34 7.404 7.404 0 0 1 3.03 1.688.664.664 0 0 1 .143.8c-.09.174-.135.368-.135.583 0 .366.13.68.392.941.262.262.575.393.941.393h.03a.664.664 0 0 1 .636.465c.22.695.331 1.43.331 2.201a7.34 7.34 0 0 1-.143 1.474.66.66 0 0 1-.27.411.666.666 0 0 1-.478.115 1 1 0 0 0-.106-.003c-.367 0-.681.13-.941.39-.261.26-.392.574-.392.943 0 .322.106.61.317.865a.662.662 0 0 1 .1.686.671.671 0 0 1-.133.202 7.294 7.294 0 0 1-3.187 1.945.674.674 0 0 1-.503-.047.659.659 0 0 1-.325-.387 1.311 1.311 0 0 0-.477-.667 1.288 1.288 0 0 0-.789-.26c-.297 0-.564.087-.798.26-.23.17-.389.393-.477.667zm3.52-1.032c.626-.253 1.191-.6 1.696-1.042a2.603 2.603 0 0 1-.277-1.19 2.642 2.642 0 0 1 .784-1.888 2.646 2.646 0 0 1 1.51-.753 6.393 6.393 0 0 0-.118-2.067 2.655 2.655 0 0 1-1.394-.738 2.656 2.656 0 0 1-.782-1.884c0-.239.029-.468.087-.687a6.05 6.05 0 0 0-1.693-.954c-.182.22-.398.41-.65.566-.431.268-.9.402-1.408.402-.511 0-.983-.134-1.414-.401a2.632 2.632 0 0 1-.653-.567 5.936 5.936 0 0 0-1.69.957 2.74 2.74 0 0 1-.125 1.72c-.134.319-.324.601-.57.847a2.641 2.641 0 0 1-1.389.738 5.903 5.903 0 0 0-.12 2.069 2.642 2.642 0 0 1 1.509.753 2.654 2.654 0 0 1 .779 1.888c0 .433-.091.831-.274 1.192.504.44 1.068.787 1.692 1.04.172-.272.393-.507.664-.707.47-.348 1-.522 1.591-.522.587 0 1.115.174 1.584.523.27.2.49.435.661.705z"}),T.createElement("path",{style:{fill:"#333",opacity:1},d:"M10.122 10.122a2.987 2.987 0 0 1-2.125.881 2.969 2.969 0 0 1-2.122-.883 2.983 2.983 0 0 1-.64-.955A2.984 2.984 0 0 1 5 7.997a2.974 2.974 0 0 1 .876-2.12A2.974 2.974 0 0 1 7.996 5c.407 0 .797.078 1.169.235.36.151.678.364.955.64a2.969 2.969 0 0 1 .883 2.122 2.987 2.987 0 0 1-.881 2.125zM7.997 6.333c-.461 0-.854.162-1.178.486a1.603 1.603 0 0 0-.486 1.178c0 .462.163.857.488 1.183.324.327.716.49 1.176.49.46 0 .855-.164 1.182-.491.327-.327.491-.721.491-1.182 0-.46-.163-.852-.49-1.176a1.618 1.618 0 0 0-1.183-.488z"}))),v||(v=T.createElement("defs",null,T.createElement("path",{id:"chat-settings_svg__a",d:"M0 0h16v16H0z"}))))};var z=s(17382);function pin_extends(){return(pin_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let pin=function(e){return T.createElement("svg",pin_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),T.createElement("g",null,_||(_=T.createElement("mask",{id:"pin_svg__b",fill:"#fff"},T.createElement("use",{xlinkHref:"#pin_svg__a"}))),T.createElement("g",{mask:"url(#pin_svg__b)"},T.createElement("path",{style:{fill:"#333",opacity:1},d:"m6.685 8.81-4 5.44-.537-.394-.397-.536 5.42-4.01a.666.666 0 0 1 .866.062l.532.528 2.07 2.063-.471.473-.472-.472c.3-.3.457-.62.472-.963.015-.353-.108-.798-.37-1.333a.665.665 0 0 1 .017-.616l2.36-4.25a.662.662 0 0 1 .679-.336l1.65.24-.096.66-.472.471-3.77-3.77.472-.471.66-.096.24 1.65a.664.664 0 0 1-.337.678l-4.25 2.36a.665.665 0 0 1-.646.001c-.479-.265-.903-.388-1.27-.369-.358.018-.69.18-.996.487l-.471-.471.471-.472 2.06 2.06.52.52a.665.665 0 0 1 .066.867zM5.61 8.02l.537.396-.472.471-.52-.52-2.06-2.06a.665.665 0 0 1 0-.943c.548-.548 1.172-.84 1.87-.875.622-.032 1.283.146 1.984.533l-.322.584-.324-.583 4.25-2.36.324.583-.66.096-.24-1.65a.664.664 0 0 1 .66-.763.665.665 0 0 1 .471.195l3.77 3.77a.666.666 0 0 1-.567 1.131l-1.65-.24.096-.66.583.324-2.36 4.25-.583-.323.599-.293c.36.738.527 1.396.503 1.974-.029.689-.316 1.305-.86 1.85a.664.664 0 0 1-.842.083.667.667 0 0 1-.101-.082l-2.068-2.062-.531-.527.47-.473.396.535-5.42 4.01a.663.663 0 0 1-.791.002.664.664 0 0 1-.142-.932z"}))),w||(w=T.createElement("defs",null,T.createElement("path",{id:"pin_svg__a",d:"M0 0h16v16H0z"}))))};var $=s(99992),L=s(85759);function light_extends(){return(light_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let light=function(e){return T.createElement("svg",light_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),k||(k=T.createElement("defs",null,T.createElement("path",{id:"light_svg__a",d:"M0 0h16v16H0z"}))),T.createElement("g",null,y||(y=T.createElement("mask",{id:"light_svg__b",fill:"#fff"},T.createElement("use",{xlinkHref:"#light_svg__a"}))),T.createElement("g",{mask:"url(#light_svg__b)"},T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(3.667 3.667)",d:"M8.67 4.33C8.67 1.94 6.73 0 4.33 0 1.94 0 0 1.94 0 4.33a4.334 4.334 0 1 0 8.67 0Z"}),T.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(7.167 .333)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),T.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(12 2.333)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),T.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(14 7.167)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),T.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(12 12)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),T.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(7.167 14)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),T.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(2.333 12)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),T.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(.333 7.167)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}),T.createElement("path",{fillRule:"evenodd",style:{fill:"#333"},transform:"translate(2.333 2.333)",d:"M1.67.83C1.67.37 1.29 0 .83 0 .37 0 0 .37 0 .83c0 .46.37.84.83.84.46 0 .84-.38.84-.84Z"}))))};function dark_extends(){return(dark_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let dark=function(e){return T.createElement("svg",dark_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),j||(j=T.createElement("defs",null,T.createElement("path",{id:"dark_svg__a",d:"M0 0h16v16H0z"}))),T.createElement("g",null,C||(C=T.createElement("mask",{id:"dark_svg__b",fill:"#fff"},T.createElement("use",{xlinkHref:"#dark_svg__a"}))),T.createElement("g",{mask:"url(#dark_svg__b)"},T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 1.333)",d:"M6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66 0-.47-.04-.92-.13-1.35a4.251 4.251 0 0 1-4.11 3.16c-2.34 0-4.24-1.89-4.24-4.24 0-1.97 1.34-3.63 3.17-4.1C7.58.05 7.13 0 6.67 0Z"}))))};function auto_extends(){return(auto_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let auto=function(e){return T.createElement("svg",auto_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),E||(E=T.createElement("defs",null,T.createElement("path",{id:"auto_svg__a",d:"M0 0h16v16H0z"}))),T.createElement("g",null,b||(b=T.createElement("mask",{id:"auto_svg__b",fill:"#fff"},T.createElement("use",{xlinkHref:"#auto_svg__a"}))),T.createElement("g",{mask:"url(#auto_svg__b)"},T.createElement("path",{style:{stroke:"#333",strokeWidth:1,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(5.667 5.333)",d:"m0 5.337.73-1.67m3.938 1.67-.73-1.67M.728 3.67 2.33 0l1.61 3.67M.73 3.667h3.21"}),T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 1.333)",d:"M13.07 5.33A6.672 6.672 0 0 0 0 5.33l2-.66"}),T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 9.333)",d:"M0 0a6.672 6.672 0 0 0 13.07 0l-1.74.67"}))))};function bottom_extends(){return(bottom_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let bottom=function(e){return T.createElement("svg",bottom_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),S||(S=T.createElement("defs",null,T.createElement("path",{id:"bottom_svg__a",d:"M0 0h16v16H0z"}))),T.createElement("g",null,M||(M=T.createElement("mask",{id:"bottom_svg__b",fill:"#fff"},T.createElement("use",{xlinkHref:"#bottom_svg__a"}))),T.createElement("g",{mask:"url(#bottom_svg__b)"},T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8 0 4 4 0 0",transform:"translate(4 4)"}),T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},d:"M8 0 4 4 0 0",transform:"translate(4 8)"}))))};function pause_extends(){return(pause_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let pause=function(e){return T.createElement("svg",pause_extends({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:16,height:16,fill:"none"},e),P||(P=T.createElement("defs",null,T.createElement("path",{id:"pause_svg__a",d:"M0 0h16v16H0z"}))),T.createElement("g",null,Z||(Z=T.createElement("mask",{id:"pause_svg__b",fill:"#fff"},T.createElement("use",{xlinkHref:"#pause_svg__a"}))),T.createElement("g",{mask:"url(#pause_svg__b)"},T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(1.333 1.333)",d:"M13.33 6.67A6.66 6.66 0 0 0 6.67 0C2.98 0 0 2.98 0 6.67a6.66 6.66 0 0 0 6.67 6.66c3.68 0 6.66-2.98 6.66-6.66Z"}),T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(6.333 6)",d:"M0 0v4"}),T.createElement("path",{style:{stroke:"#333",strokeWidth:1.3333333333333333,strokeOpacity:1,strokeDasharray:"0 0"},transform:"translate(9.667 6)",d:"M0 0v4"}))))};var B=s(6333),F=s(27223),Q=s(83642),U=s.n(Q),G=s(98346),X=s(7297),V=s(11030),q=s(72306),J=s(54283),Y=s.n(J),ee=s(70137),et=s(5666),es=s(52925),en=s(40714),ea=s(16789),er=s(65687),eo=s(46353),el=s(24839),ei=s(69469),ec=s.n(ei);let ed={src:"/_next/static/media/bot.0c800005.png"};var em=s(13262),eh=s(70247),ep=s.n(eh);function MessageSelector(e){let t=(0,B.aK)(),s=t.currentSession(),isValid=e=>e.content&&!e.isError&&!e.streaming,n=s.messages.filter((e,t)=>e.id&&isValid(e)&&(t>=s.messages.length-1||isValid(s.messages[t+1]))),a=n.length,r=(0,B.MG)(),[o,l]=(0,A.useState)(""),[i,c]=(0,A.useState)(new Set),isInSearchResult=e=>0===o.length||i.has(e),doSearch=e=>{let t=new Set;e.length>0&&n.forEach(s=>s.content.includes(e)?t.add(s.id):null),c(t)},{startIndex:d,endIndex:m,onClickIndex:h}=function(){let[e,t]=(0,A.useState)(),[s,n]=(0,A.useState)(),[a,r]=(0,A.useState)(!1);return(0,A.useEffect)(()=>{let onKeyDown=e=>{"Shift"===e.key&&r(!0)},onKeyUp=e=>{"Shift"===e.key&&(r(!1),t(void 0),n(void 0))};return window.addEventListener("keyup",onKeyUp),window.addEventListener("keydown",onKeyDown),()=>{window.removeEventListener("keyup",onKeyUp),window.removeEventListener("keydown",onKeyDown)}},[]),{onClickIndex:s=>{a&&void 0!==e?n(s):(t(s),n(void 0))},startIndex:e,endIndex:s}}(),selectAll=()=>{e.updateSelection(e=>n.forEach(t=>e.add(t.id)))};return(0,A.useEffect)(()=>{e.defaultSelectAll&&selectAll()},[]),(0,A.useEffect)(()=>{if(void 0===d||void 0===m)return;let[t,s]=[d,m].sort((e,t)=>e-t);e.updateSelection(e=>{for(let a=t;a<=s;a+=1)e.add(n[a].id??a)})},[d,m]),(0,N.jsxs)("div",{className:ep()["message-selector"],children:[(0,N.jsxs)("div",{className:ep()["message-filter"],children:[N.jsx("input",{type:"text",placeholder:V.ZP.Select.Search,className:ep()["filter-item"]+" "+ep()["search-bar"],value:o,onInput:e=>{l(e.currentTarget.value),doSearch(e.currentTarget.value)}}),(0,N.jsxs)("div",{className:ep().actions,children:[N.jsx(q.h,{text:V.ZP.Select.All,bordered:!0,className:ep()["filter-item"],onClick:selectAll}),N.jsx(q.h,{text:V.ZP.Select.Latest,bordered:!0,className:ep()["filter-item"],onClick:()=>e.updateSelection(e=>{e.clear(),n.slice(a-4).forEach(t=>e.add(t.id))})}),N.jsx(q.h,{text:V.ZP.Select.Clear,bordered:!0,className:ep()["filter-item"],onClick:()=>e.updateSelection(e=>e.clear())})]})]}),N.jsx("div",{className:ep().messages,children:n.map((t,n)=>isInSearchResult(t.id)?(0,N.jsxs)("div",{className:`${ep().message} ${e.selection.has(t.id)&&ep()["message-selected"]}`,onClick:()=>{e.updateSelection(e=>{let s=t.id??n;e.has(s)?e.delete(s):e.add(s)}),h(n)},children:[N.jsx("div",{className:ep().avatar,children:"user"===t.role?N.jsx(en.qE,{avatar:r.avatar}):N.jsx(ea.MaskAvatar,{mask:s.mask})}),(0,N.jsxs)("div",{className:ep().body,children:[N.jsx("div",{className:ep().date,children:new Date(t.date).toLocaleString()}),N.jsx("div",{className:`${ep().content} one-line`,children:t.content})]})]},n):null)})]})}var eu=s(52451),eg=s.n(eu),ex=s(5779),ef=s(41629),ev=s(46743);let e_=U()(async()=>(await Promise.all([s.e(6824),s.e(8136)]).then(s.bind(s,48136))).Markdown,{loadableGenerated:{modules:["/Users/hanxie/localproject/ai/fc3-ai-app/fc-qwen/src/code/client/app/components/exporter.tsx -> ./markdown"]},loading:()=>N.jsx(H.Z,{})});function ExportMessageModal(e){return N.jsx("div",{className:"modal-mask",children:N.jsx(ee.u_,{title:V.ZP.Export.Title,onClose:e.onClose,children:N.jsx("div",{style:{minHeight:"40vh"},children:N.jsx(MessageExporter,{})})})})}function Steps(e){let t=e.steps,s=t.length;return(0,N.jsxs)("div",{className:ec().steps,children:[N.jsx("div",{className:ec()["steps-progress"],children:N.jsx("div",{className:ec()["steps-progress-inner"],style:{width:`${(e.index+1)/s*100}%`}})}),N.jsx("div",{className:ec()["steps-inner"],children:t.map((t,s)=>(0,N.jsxs)("div",{className:`${ec().step} ${ec()[s<=e.index?"step-finished":""]} ${s===e.index&&ec()["step-current"]} clickable`,onClick:()=>{e.onStepChange?.(s)},role:"button",children:[N.jsx("span",{className:ec()["step-index"],children:s+1}),N.jsx("span",{className:ec()["step-name"],children:t.name})]},s))})]})}function MessageExporter(){let e=[{name:V.ZP.Export.Steps.Select,value:"select"},{name:V.ZP.Export.Steps.Preview,value:"preview"}],{currentStep:t,setCurrentStepIndex:s,currentStepIndex:n}=function(e){let t=e.length,[s,n]=(0,A.useState)(0);return{currentStepIndex:s,setCurrentStepIndex:n,nextStep:()=>n((s+1)%t),prevStep:()=>n((s-1+t)%t),currentStep:e[s]}}(e),[a,r]=(0,A.useState)({format:"image",includeContext:!0});function updateExportConfig(e){let t={...a};e(t),r(t)}let o=(0,B.aK)(),l=o.currentSession(),{selection:i,updateSelection:c}=function(){let[e,t]=(0,A.useState)(new Set);return{selection:e,updateSelection:s=>{let n=new Set(e);s(n),t(n)}}}(),d=(0,A.useMemo)(()=>{let e=[];return a.includeContext&&e.push(...l.mask.context),e.push(...l.messages.filter((e,t)=>i.has(e.id))),e},[a.includeContext,l.messages,l.mask.context,i]);return(0,N.jsxs)(N.Fragment,{children:[N.jsx(Steps,{steps:e,index:n,onStepChange:s}),(0,N.jsxs)("div",{className:ec()["message-exporter-body"],style:"select"!==t.value?{display:"none"}:{},children:[(0,N.jsxs)(ee.aV,{children:[N.jsx(ee.HC,{title:V.ZP.Export.Format.Title,subTitle:V.ZP.Export.Format.SubTitle,children:N.jsx(ee.Ph,{value:a.format,onChange:e=>updateExportConfig(t=>t.format=e.currentTarget.value),children:["text","image","json"].map(e=>N.jsx("option",{value:e,children:e},e))})}),N.jsx(ee.HC,{title:V.ZP.Export.IncludeContext.Title,subTitle:V.ZP.Export.IncludeContext.SubTitle,children:N.jsx("input",{type:"checkbox",checked:a.includeContext,onChange:e=>{updateExportConfig(t=>t.includeContext=e.currentTarget.checked)}})})]}),N.jsx(MessageSelector,{selection:i,updateSelection:c,defaultSelectAll:!0})]}),"preview"===t.value&&N.jsx("div",{className:ec()["message-exporter-body"],children:"text"===a.format?N.jsx(MarkdownPreviewer,{messages:d,topic:l.topic}):"json"===a.format?N.jsx(JsonPreviewer,{messages:d,topic:l.topic}):N.jsx(ImagePreviewer,{messages:d,topic:l.topic})})]})}function RenderExport(e){let t=(0,A.useRef)(null);return(0,A.useEffect)(()=>{if(!t.current)return;let s=t.current,n=Array.from(s.getElementsByClassName(es.yY));if(n.length!==e.messages.length)return;let a=n.map((e,t)=>{let[s,n]=e.id.split(":");return{id:t.toString(),role:s,content:"user"===s?e.textContent??"":e.innerHTML,date:""}});e.onRender(a)}),N.jsx("div",{ref:t,children:e.messages.map((e,t)=>N.jsx("div",{id:`${e.role}:${t}`,className:es.yY,children:N.jsx(e_,{content:e.content,defaultShow:!0})},t))})}function PreviewActions(e){let[t,s]=(0,A.useState)(!1),[n,a]=(0,A.useState)(!1),share=async()=>{e.messages?.length&&(s(!0),a(!0))};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:ec()["preview-actions"],children:[e.showCopy&&N.jsx(q.h,{text:V.ZP.Export.Copy,bordered:!0,shadow:!0,icon:N.jsx(D.Z,{}),onClick:e.copy}),N.jsx(q.h,{text:V.ZP.Export.Download,bordered:!0,shadow:!0,icon:N.jsx(em.Z,{}),onClick:e.download}),N.jsx(q.h,{text:V.ZP.Export.Share,bordered:!0,shadow:!0,icon:t?N.jsx(H.Z,{}):N.jsx(icons_share,{}),onClick:share})]}),N.jsx("div",{style:{position:"fixed",right:"200vw",pointerEvents:"none"},children:n&&N.jsx(RenderExport,{messages:e.messages??[],onRender:e=>{a(!1),ef.hi.share(e).then(e=>{e&&((0,ee.K4)({title:V.ZP.Export.Share,children:[N.jsx("input",{type:"text",value:e,style:{width:"100%",maxWidth:"unset"},readOnly:!0,onClick:e=>e.currentTarget.select()},"input")],actions:[N.jsx(q.h,{icon:N.jsx(D.Z,{}),text:V.ZP.Chat.Actions.Copy,onClick:()=>(0,F.vQ)(e)},"copy")]}),setTimeout(()=>{window.open(e,"_blank")},800))}).catch(e=>{console.error("[Share]",e),(0,ee.CF)((0,el.B)(e))}).finally(()=>s(!1))}})})]})}function ExportAvatar(e){return e.avatar===er._G?N.jsx(eg(),{src:ed.src,width:30,height:30,alt:"bot",className:"user-avatar"}):N.jsx(en.qE,{avatar:e.avatar})}function ImagePreviewer(e){let t=(0,B.aK)(),s=t.currentSession(),n=s.mask,a=(0,B.MG)(),r=(0,A.useRef)(null),o=(0,F.S0)();return(0,N.jsxs)("div",{className:ec()["image-previewer"],children:[N.jsx(PreviewActions,{copy:()=>{(0,ee.CF)(V.ZP.Export.Image.Toast);let e=r.current;e&&(0,ex.toBlob)(e).then(e=>{if(e)try{navigator.clipboard.write([new ClipboardItem({"image/png":e})]).then(()=>{(0,ee.CF)(V.ZP.Copy.Success)})}catch(e){console.error("[Copy Image] ",e),(0,ee.CF)(V.ZP.Copy.Failed)}})},download:()=>{(0,ee.CF)(V.ZP.Export.Image.Toast);let t=r.current;t&&(0,ex.toPng)(t).then(t=>{if(t){if(o||ev.Z()?.isApp)(0,ee.vi)(t);else{let s=document.createElement("a");s.download=`${e.topic}.png`,s.href=t,s.click()}}}).catch(e=>console.log("[Export Image] ",e))},showCopy:!o,messages:e.messages}),(0,N.jsxs)("div",{className:`${ec()["preview-body"]} ${ec()["default-theme"]}`,ref:r,children:[(0,N.jsxs)("div",{className:ec()["chat-info"],children:[N.jsx("div",{className:ec().logo+" no-dark",children:N.jsx(eg(),{src:"/_next/static/media/chatgpt.1956a04f.png",alt:"logo",width:50,height:50})}),(0,N.jsxs)("div",{children:[N.jsx("div",{className:ec()["main-title"],children:"ChatGPT Next Web"}),N.jsx("div",{className:ec()["sub-title"],children:"github.com/Yidadaa/ChatGPT-Next-Web"}),(0,N.jsxs)("div",{className:ec().icons,children:[N.jsx(ExportAvatar,{avatar:a.avatar}),N.jsx("span",{className:ec()["icon-space"],children:"&"}),N.jsx(ExportAvatar,{avatar:n.avatar})]})]}),(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:ec()["chat-info-item"],children:[V.ZP.Exporter.Model,": ",n.modelConfig.model]}),(0,N.jsxs)("div",{className:ec()["chat-info-item"],children:[V.ZP.Exporter.Messages,": ",e.messages.length]}),(0,N.jsxs)("div",{className:ec()["chat-info-item"],children:[V.ZP.Exporter.Topic,": ",s.topic]}),(0,N.jsxs)("div",{className:ec()["chat-info-item"],children:[V.ZP.Exporter.Time,":"," ",new Date(e.messages.at(-1)?.date??Date.now()).toLocaleString()]})]})]}),e.messages.map((e,t)=>(0,N.jsxs)("div",{className:ec().message+" "+ec()["message-"+e.role],children:[N.jsx("div",{className:ec().avatar,children:N.jsx(ExportAvatar,{avatar:"user"===e.role?a.avatar:n.avatar})}),N.jsx("div",{className:ec().body,children:N.jsx(e_,{content:e.content,fontSize:a.fontSize,defaultShow:!0})})]},t))]})]})}function MarkdownPreviewer(e){let t=`# ${e.topic}

`+e.messages.map(e=>"user"===e.role?`## ${V.ZP.Export.MessageFromYou}:
${e.content}`:`## ${V.ZP.Export.MessageFromChatGPT}:
${e.content.trim()}`).join("\n\n");return(0,N.jsxs)(N.Fragment,{children:[N.jsx(PreviewActions,{copy:()=>{(0,F.vQ)(t)},download:()=>{(0,F.CP)(t,`${e.topic}.md`)},showCopy:!0,messages:e.messages}),N.jsx("div",{className:"markdown-body",children:N.jsx("pre",{className:ec()["export-content"],children:t})})]})}function JsonPreviewer(e){let t=e.messages.map(e=>({role:e.role,content:e.content})),s="\n"+JSON.stringify(t,null,2)+"\n";return(0,N.jsxs)(N.Fragment,{children:[N.jsx(PreviewActions,{copy:()=>{(0,F.vQ)(JSON.stringify(t,null,2))},download:()=>{(0,F.CP)(JSON.stringify(t,null,2),`${e.topic}.json`)},showCopy:!0,messages:e.messages}),N.jsx("div",{className:"markdown-body",children:N.jsx("pre",{className:ec()["export-content"],children:s})})]})}let ew=U()(async()=>(await Promise.all([s.e(6824),s.e(8136)]).then(s.bind(s,48136))).Markdown,{loadableGenerated:{modules:["/Users/hanxie/localproject/ai/fc3-ai-app/fc-qwen/src/code/client/app/components/chat.tsx -> ./markdown"]},loading:()=>N.jsx(H.Z,{})});function SessionConfigModel(e){let t=(0,B.aK)(),s=t.currentSession(),n=(0,er.Zy)(),a=(0,et.useNavigate)();return N.jsx("div",{className:"modal-mask",children:N.jsx(ee.u_,{title:V.ZP.Context.Edit,onClose:()=>e.onClose(),actions:[N.jsx(q.h,{icon:N.jsx(W.Z,{}),bordered:!0,text:V.ZP.Chat.Config.Reset,onClick:async()=>{await (0,ee.i0)(V.ZP.Memory.ResetConfirm)&&t.updateCurrentSession(e=>e.memoryPrompt="")}},"reset"),N.jsx(q.h,{icon:N.jsx(D.Z,{}),bordered:!0,text:V.ZP.Chat.Config.SaveAs,onClick:()=>{a(es.y$.Masks),setTimeout(()=>{n.create(s.mask)},500)}},"copy")],children:N.jsx(ea.MaskConfig,{mask:s.mask,updateMask:e=>{let n={...s.mask};e(n),t.updateCurrentSession(e=>e.mask=n)},shouldSyncFromGlobal:!0,extraListItems:s.mask.modelConfig.sendMemory?N.jsx(ee.HC,{title:`${V.ZP.Memory.Title} (${s.lastSummarizeIndex} of ${s.messages.length})`,subTitle:s.memoryPrompt||V.ZP.Memory.EmptyContent}):N.jsx(N.Fragment,{})})})})}function PromptToast(e){let t=(0,B.aK)(),s=t.currentSession(),n=s.mask.context;return(0,N.jsxs)("div",{className:Y()["prompt-toast"],children:[e.showToast&&(0,N.jsxs)("div",{className:Y()["prompt-toast-inner"]+" clickable",role:"button",onClick:()=>e.setShowModal(!0),children:[N.jsx(brain,{}),N.jsx("span",{className:Y()["prompt-toast-content"],children:V.ZP.Context.Toast(n.length)})]}),e.showModal&&N.jsx(SessionConfigModel,{onClose:()=>e.setShowModal(!1)})]},"prompt-toast")}function PromptHints(e){let t=0===e.prompts.length,[s,n]=(0,A.useState)(0),a=(0,A.useRef)(null);return((0,A.useEffect)(()=>{n(0)},[e.prompts.length]),(0,A.useEffect)(()=>{let onKeyDown=r=>{if(t||r.metaKey||r.altKey||r.ctrlKey)return;let changeIndex=t=>{r.stopPropagation(),r.preventDefault();let o=Math.max(0,Math.min(e.prompts.length-1,s+t));n(o),a.current?.scrollIntoView({block:"center"})};if("ArrowUp"===r.key)changeIndex(1);else if("ArrowDown"===r.key)changeIndex(-1);else if("Enter"===r.key){let t=e.prompts.at(s);t&&e.onPromptSelect(t)}};return window.addEventListener("keydown",onKeyDown),()=>window.removeEventListener("keydown",onKeyDown)},[e.prompts.length,s]),t)?null:N.jsx("div",{className:Y()["prompt-hints"],children:e.prompts.map((t,r)=>(0,N.jsxs)("div",{ref:r===s?a:null,className:Y()["prompt-hint"]+` ${r===s?Y()["prompt-hint-selected"]:""}`,onClick:()=>e.onPromptSelect(t),onMouseEnter:()=>n(r),children:[N.jsx("div",{className:Y()["hint-title"],children:t.title}),N.jsx("div",{className:Y()["hint-content"],children:t.content})]},t.title+r.toString()))})}function ClearContextDivider(){let e=(0,B.aK)();return(0,N.jsxs)("div",{className:Y()["clear-context"],onClick:()=>e.updateCurrentSession(e=>e.clearContextIndex=void 0),children:[N.jsx("div",{className:Y()["clear-context-tips"],children:V.ZP.Context.Clear}),N.jsx("div",{className:Y()["clear-context-revert-btn"],children:V.ZP.Context.Revert})]})}function ChatAction(e){let t=(0,A.useRef)(null),s=(0,A.useRef)(null),[n,a]=(0,A.useState)({full:16,icon:16});function updateWidth(){if(!t.current||!s.current)return;let e=s.current.getBoundingClientRect().width,n=t.current.getBoundingClientRect().width;a({full:e+n,icon:n})}return(0,N.jsxs)("div",{className:`${Y()["chat-input-action"]} clickable`,onClick:()=>{e.onClick(),setTimeout(updateWidth,1)},onMouseEnter:updateWidth,onTouchStart:updateWidth,style:{"--icon-width":`${n.icon}px`,"--full-width":`${n.full}px`},children:[N.jsx("div",{ref:t,className:Y().icon,children:e.icon}),N.jsx("div",{className:Y().text,ref:s,children:e.text})]})}function ChatActions(e){let t=(0,B.MG)(),s=(0,et.useNavigate)(),n=(0,B.aK)(),a=t.theme,r=G.L.hasPending(),o=n.currentSession().mask.modelConfig.model,l=(0,A.useMemo)(()=>t.allModels().filter(e=>e.available).map(e=>e.name),[t]),[i,c]=(0,A.useState)(!1);return(0,N.jsxs)("div",{className:Y()["chat-input-actions"],children:[r&&N.jsx(ChatAction,{onClick:()=>G.L.stopAll(),text:V.ZP.Chat.InputActions.Stop,icon:N.jsx(pause,{})}),!e.hitBottom&&N.jsx(ChatAction,{onClick:e.scrollToBottom,text:V.ZP.Chat.InputActions.ToBottom,icon:N.jsx(bottom,{})}),e.hitBottom&&N.jsx(ChatAction,{onClick:e.showPromptModal,text:V.ZP.Chat.InputActions.Settings,icon:N.jsx(chat_settings,{})}),N.jsx(ChatAction,{onClick:function(){let e=[B.Q2.Auto,B.Q2.Light,B.Q2.Dark],s=e.indexOf(a),n=(s+1)%e.length,r=e[n];t.update(e=>e.theme=r)},text:V.ZP.Chat.InputActions.Theme[a],icon:N.jsx(N.Fragment,{children:a===B.Q2.Auto?N.jsx(auto,{}):a===B.Q2.Light?N.jsx(light,{}):a===B.Q2.Dark?N.jsx(dark,{}):null})}),N.jsx(ChatAction,{onClick:e.showPromptHints,text:V.ZP.Chat.InputActions.Prompt,icon:N.jsx(icons_prompt,{})}),N.jsx(ChatAction,{onClick:()=>{s(es.y$.Masks)},text:V.ZP.Chat.InputActions.Masks,icon:N.jsx(I.Z,{})}),N.jsx(ChatAction,{text:V.ZP.Chat.InputActions.Clear,icon:N.jsx(icons_break,{}),onClick:()=>{n.updateCurrentSession(e=>{e.clearContextIndex===e.messages.length?e.clearContextIndex=void 0:(e.clearContextIndex=e.messages.length,e.memoryPrompt="")})}}),i&&N.jsx(ee.Qf,{defaultSelectedValue:o,items:l.map(e=>({title:e,value:e})),onClose:()=>c(!1),onSelection:e=>{0!==e.length&&(n.updateCurrentSession(t=>{t.mask.modelConfig.model=e[0],t.mask.syncGlobalConfig=!1}),(0,ee.CF)(e[0]))}})]})}function EditMessageModal(e){let t=(0,B.aK)(),s=t.currentSession(),[n,a]=(0,A.useState)(s.messages.slice());return N.jsx("div",{className:"modal-mask",children:(0,N.jsxs)(ee.u_,{title:V.ZP.Chat.EditMessage.Title,onClose:e.onClose,actions:[N.jsx(q.h,{text:V.ZP.UI.Cancel,icon:N.jsx(L.Z,{}),onClick:()=>{e.onClose()}},"cancel"),N.jsx(q.h,{type:"primary",text:V.ZP.UI.Confirm,icon:N.jsx($.Z,{}),onClick:()=>{t.updateCurrentSession(e=>e.messages=n),e.onClose()}},"ok")],children:[N.jsx(ee.aV,{children:N.jsx(ee.HC,{title:V.ZP.Chat.EditMessage.Topic.Title,subTitle:V.ZP.Chat.EditMessage.Topic.SubTitle,children:N.jsx("input",{type:"text",value:s.topic,onInput:e=>t.updateCurrentSession(t=>t.topic=e.currentTarget.value)})})}),N.jsx(ea.ContextPrompts,{context:n,updateContext:e=>{let t=n.slice();e(t),a(t)}})]})})}function _Chat(){let e=(0,B.aK)(),t=e.currentSession(),s=(0,B.MG)(),n=s.fontSize,[a,r]=(0,A.useState)(!1),o=(0,A.useRef)(null),[l,i]=(0,A.useState)(""),[c,d]=(0,A.useState)(!1),{submitKey:m,shouldSubmit:h}=function(){let e=(0,B.MG)(),t=e.submitKey,s=(0,A.useRef)(!1);return(0,A.useEffect)(()=>{let onCompositionStart=()=>{s.current=!0},onCompositionEnd=()=>{s.current=!1};return window.addEventListener("compositionstart",onCompositionStart),window.addEventListener("compositionend",onCompositionEnd),()=>{window.removeEventListener("compositionstart",onCompositionStart),window.removeEventListener("compositionend",onCompositionEnd)}},[]),{submitKey:t,shouldSubmit:t=>"Enter"===t.key&&("Enter"!==t.key||!t.nativeEvent.isComposing&&!s.current)&&(e.submitKey===B.mQ.AltEnter&&t.altKey||e.submitKey===B.mQ.CtrlEnter&&t.ctrlKey||e.submitKey===B.mQ.ShiftEnter&&t.shiftKey||e.submitKey===B.mQ.MetaEnter&&t.metaKey||e.submitKey===B.mQ.Enter&&!t.altKey&&!t.ctrlKey&&!t.shiftKey&&!t.metaKey)}}(),{scrollRef:p,setAutoScroll:u,scrollDomToBottom:g}=function(){let e=(0,A.useRef)(null),[t,s]=(0,A.useState)(!0);function scrollDomToBottom(){let t=e.current;t&&requestAnimationFrame(()=>{s(!0),t.scrollTo(0,t.scrollHeight)})}return(0,A.useEffect)(()=>{t&&scrollDomToBottom()}),{scrollRef:e,autoScroll:t,setAutoScroll:s,scrollDomToBottom}}(),[x,f]=(0,A.useState)(!0),v=(0,F.S0)(),_=(0,et.useNavigate)(),w=(0,X.f)(),[k,y]=(0,A.useState)([]),j=(0,O.y1)(e=>{let t=w.search(e);y(t)},100,{leading:!0,trailing:!0}),[C,E]=(0,A.useState)(2),b=(0,O.y1)(()=>{let e=o.current?(0,F.lx)(o.current):1,t=Math.min(20,Math.max(2+Number(!v),e));E(t)},100,{leading:!0,trailing:!0});(0,A.useEffect)(b,[l]);let S=(0,eo.UK)({new:()=>e.newSession(),newm:()=>_(es.y$.NewChat),prev:()=>e.nextSession(-1),next:()=>e.nextSession(1),clear:()=>e.updateCurrentSession(e=>e.clearContextIndex=e.messages.length),del:()=>e.deleteSession(e.currentSessionIndex)}),onInput=e=>{i(e);let t=e.trim().length;0===t?y([]):e.startsWith(eo.x6)?y(S.search(e)):!s.disablePromptHint&&t<30&&e.startsWith("/")&&j(e.slice(1))},doSubmit=t=>{if(""===t.trim())return;let s=S.match(t);if(s.matched){i(""),y([]),s.invoke();return}d(!0),e.onUserInput(t).then(()=>d(!1)),localStorage.setItem(es.Sb,t),i(""),y([]),v||o.current?.focus(),u(!0)},onUserStop=e=>{G.L.stop(t.id,e)};(0,A.useEffect)(()=>{e.updateCurrentSession(e=>{let t=Date.now()-es.tb;e.messages.forEach(e=>{(e.isError||new Date(e.date).getTime()<t)&&(e.streaming&&(e.streaming=!1),0===e.content.length&&(e.isError=!0,e.content=(0,el.B)({error:!0,message:"empty response"})))}),e.mask.syncGlobalConfig&&(console.log("[Mask] syncing from global, name = ",e.mask.name),e.mask.modelConfig={...s.modelConfig})})},[]);let onRightClick=(e,t)=>{(0,F.Ri)(e.currentTarget,t.content)&&(0===l.length&&i(t.content),e.preventDefault())},deleteMessage=t=>{e.updateCurrentSession(e=>e.messages=e.messages.filter(e=>e.id!==t))},onDelete=e=>{deleteMessage(e)},onResend=s=>{let n,a;let r=t.messages.findIndex(e=>e.id===s.id);if(r<=0||r>=t.messages.length){console.error("[Chat] failed to find resending message",s);return}if("assistant"===s.role){a=s;for(let e=r;e>=0;e-=1)if("user"===t.messages[e].role){n=t.messages[e];break}}else if("user"===s.role){n=s;for(let e=r;e<t.messages.length;e+=1)if("assistant"===t.messages[e].role){a=t.messages[e];break}}if(void 0===n){console.error("[Chat] failed to resend",s);return}deleteMessage(n.id),deleteMessage(a?.id),d(!0),e.onUserInput(n.content).then(()=>d(!1)),o.current?.focus()},onPinMessage=t=>{e.updateCurrentSession(e=>e.mask.context.push(t)),(0,ee.CF)(V.ZP.Chat.Actions.PinToastContent,{text:V.ZP.Chat.Actions.PinToastAction,onClick:()=>{Q(!0)}})},M=(0,A.useMemo)(()=>t.mask.hideContext?[]:t.mask.context.slice(),[t.mask.context,t.mask.hideContext]),P=(0,B._X)();if(0===M.length&&t.messages.at(0)?.content!==B.ux.content){let e=Object.assign({},B.ux);P.isAuthorized()||(e.content=V.ZP.Error.Unauthorized),M.push(e)}let Z=(0,A.useMemo)(()=>M.concat(t.messages).concat(c?[{...(0,B.tn)({role:"assistant",content:"……"}),preview:!0}]:[]).concat(l.length>0&&s.sendPreviewBubble?[{...(0,B.tn)({role:"user",content:l}),preview:!0}]:[]),[s.sendPreviewBubble,M,c,t.messages,l]),[T,H]=(0,A.useState)(Math.max(0,Z.length-es.nS));function setMsgRenderIndex(e){H(e=Math.max(0,e=Math.min(Z.length-es.nS,e)))}let I=(0,A.useMemo)(()=>{let e=Math.min(T+3*es.nS,Z.length);return Z.slice(T,e)},[T,Z]),onChatBodyScroll=e=>{let t=e.scrollTop+e.clientHeight,s=e.clientHeight,n=e.scrollTop<=s,a=t>=e.scrollHeight-s,r=t>=e.scrollHeight-10,o=T-es.nS,l=T+es.nS;n&&!a?setMsgRenderIndex(o):a&&setMsgRenderIndex(l),f(r),u(r)};function scrollToBottom(){setMsgRenderIndex(Z.length-es.nS),g()}let $=(t.clearContextIndex??-1)>=0?t.clearContextIndex+M.length-T:-1,[L,Q]=(0,A.useState)(!1),U=(0,A.useMemo)(()=>(0,ev.Z)(),[]),J=!v&&!U?.isApp;(0,eo.YZ)({fill:i,submit:e=>{doSubmit(e)},code:e=>{console.log("[Command] got code from url: ",e),(0,ee.i0)(V.ZP.URLCommand.Code+`code = ${e}`).then(t=>{t&&P.updateCode(e)})},settings:e=>{try{let t=JSON.parse(e);console.log("[Command] got settings from url: ",t),(t.key||t.url)&&(0,ee.i0)(V.ZP.URLCommand.Settings+`
${JSON.stringify(t,null,4)}`).then(e=>{e&&(t.key&&P.updateToken(t.key),t.url&&P.updateOpenAiUrl(t.url))})}catch{console.error("[Command] failed to get settings from url: ",e)}}});let[er,ei]=(0,A.useState)(!1);return(0,N.jsxs)("div",{className:Y().chat,children:[(0,N.jsxs)("div",{className:"window-header","data-tauri-drag-region":!0,children:[v&&N.jsx("div",{className:"window-actions",children:N.jsx("div",{className:"window-action-button",children:N.jsx(q.h,{icon:N.jsx(icons_return,{}),bordered:!0,title:V.ZP.Chat.Actions.ChatList,onClick:()=>_(es.y$.Home)})})}),(0,N.jsxs)("div",{className:`window-header-title ${Y()["chat-body-title"]}`,children:[N.jsx("div",{className:`window-header-main-title ${Y()["chat-body-main-title"]}`,onClickCapture:()=>ei(!0),children:t.topic?t.topic:B.HX}),N.jsx("div",{className:"window-header-sub-title",children:V.ZP.Chat.SubTitle(t.messages.length)})]}),(0,N.jsxs)("div",{className:"window-actions",children:[!v&&N.jsx("div",{className:"window-action-button",children:N.jsx(q.h,{icon:N.jsx(rename,{}),bordered:!0,onClick:()=>ei(!0)})}),N.jsx("div",{className:"window-action-button",children:N.jsx(q.h,{icon:N.jsx(icons_share,{}),bordered:!0,title:V.ZP.Chat.Actions.Export,onClick:()=>{r(!0)}})}),J&&N.jsx("div",{className:"window-action-button",children:N.jsx(q.h,{icon:s.tightBorder?N.jsx(R.Z,{}):N.jsx(K.Z,{}),bordered:!0,onClick:()=>{s.update(e=>e.tightBorder=!e.tightBorder)}})})]}),N.jsx(PromptToast,{showToast:!x,showModal:L,setShowModal:Q})]}),N.jsx("div",{className:Y()["chat-body"],ref:p,onScroll:e=>onChatBodyScroll(e.currentTarget),onMouseDown:()=>o.current?.blur(),onTouchStart:()=>{o.current?.blur(),u(!1)},children:I.map((a,r)=>{let o="user"===a.role,l=r<M.length,c=r>0&&!(a.preview||0===a.content.length)&&!l,d=a.preview||a.streaming,m=r===$-1;return(0,N.jsxs)(A.Fragment,{children:[N.jsx("div",{className:o?Y()["chat-message-user"]:Y()["chat-message"],children:(0,N.jsxs)("div",{className:Y()["chat-message-container"],children:[(0,N.jsxs)("div",{className:Y()["chat-message-header"],children:[(0,N.jsxs)("div",{className:Y()["chat-message-avatar"],children:[N.jsx("div",{className:Y()["chat-message-edit"],children:N.jsx(q.h,{icon:N.jsx(rename,{}),onClick:async()=>{let t=await (0,ee.G5)(V.ZP.Chat.Actions.Edit,a.content,10);e.updateCurrentSession(e=>{let s=e.mask.context.concat(e.messages).find(e=>e.id===a.id);s&&(s.content=t)})}})}),o?N.jsx(en.qE,{avatar:s.avatar}):N.jsx(ea.MaskAvatar,{mask:t.mask})]}),c&&N.jsx("div",{className:Y()["chat-message-actions"],children:N.jsx("div",{className:Y()["chat-input-actions"],children:a.streaming?N.jsx(ChatAction,{text:V.ZP.Chat.Actions.Stop,icon:N.jsx(pause,{}),onClick:()=>onUserStop(a.id??r)}):(0,N.jsxs)(N.Fragment,{children:[N.jsx(ChatAction,{text:V.ZP.Chat.Actions.Retry,icon:N.jsx(W.Z,{}),onClick:()=>onResend(a)}),N.jsx(ChatAction,{text:V.ZP.Chat.Actions.Delete,icon:N.jsx(z.Z,{}),onClick:()=>onDelete(a.id??r)}),N.jsx(ChatAction,{text:V.ZP.Chat.Actions.Pin,icon:N.jsx(pin,{}),onClick:()=>onPinMessage(a)}),N.jsx(ChatAction,{text:V.ZP.Chat.Actions.Copy,icon:N.jsx(D.Z,{}),onClick:()=>(0,F.vQ)(a.content)})]})})})]}),d&&N.jsx("div",{className:Y()["chat-message-status"],children:V.ZP.Chat.Typing}),N.jsx("div",{className:Y()["chat-message-item"],children:N.jsx(ew,{content:a.content,loading:(a.preview||a.streaming)&&0===a.content.length&&!o,onContextMenu:e=>onRightClick(e,a),onDoubleClickCapture:()=>{v&&i(a.content)},fontSize:n,parentRef:p,defaultShow:r>=I.length-6})}),N.jsx("div",{className:Y()["chat-message-action-date"],children:l?V.ZP.Chat.IsContext:a.date.toLocaleString()})]})}),m&&N.jsx(ClearContextDivider,{})]},a.id)})}),(0,N.jsxs)("div",{className:Y()["chat-input-panel"],children:[N.jsx(PromptHints,{prompts:k,onPromptSelect:e=>{setTimeout(()=>{y([]);let t=S.match(e.content);t.matched?(t.invoke(),i("")):i(e.content),o.current?.focus()},30)}}),N.jsx(ChatActions,{showPromptModal:()=>Q(!0),scrollToBottom:scrollToBottom,hitBottom:x,showPromptHints:()=>{if(k.length>0){y([]);return}o.current?.focus(),i("/"),j("")}}),(0,N.jsxs)("div",{className:Y()["chat-input-panel-inner"],children:[N.jsx("textarea",{ref:o,className:Y()["chat-input"],placeholder:V.ZP.Chat.Input(m),onInput:e=>onInput(e.currentTarget.value),value:l,onKeyDown:e=>{if("ArrowUp"===e.key&&l.length<=0&&!(e.metaKey||e.altKey||e.ctrlKey)){i(localStorage.getItem(es.Sb)??""),e.preventDefault();return}h(e)&&0===k.length&&(doSubmit(l),e.preventDefault())},onFocus:scrollToBottom,onClick:scrollToBottom,rows:C,autoFocus:!v,style:{fontSize:s.fontSize}}),N.jsx(q.h,{icon:N.jsx(send_white,{}),text:V.ZP.Chat.Send,className:Y()["chat-input-send"],type:"primary",onClick:()=>doSubmit(l)})]})]}),N.jsx("div",{className:Y()["chat-disclaimer"],children:"服务生成的内容均由人工智能模型生成，其生成内容的准确性和完整性无法保证，不代表我们的态度或者观点"}),a&&N.jsx(ExportMessageModal,{onClose:()=>r(!1)}),er&&N.jsx(EditMessageModal,{onClose:()=>{ei(!1)}})]},t.id)}function Chat(){let e=(0,B.aK)(),t=e.currentSessionIndex;return N.jsx(_Chat,{},t)}},69469:e=>{e.exports={"message-exporter-body":"exporter_message-exporter-body__ieezO","export-content":"exporter_export-content__bLZvx",steps:"exporter_steps__6n3hv","steps-progress":"exporter_steps-progress__BaZCB","steps-progress-inner":"exporter_steps-progress-inner__Bx3Y4","steps-inner":"exporter_steps-inner__EVqvK",step:"exporter_step__WhCEO","step-finished":"exporter_step-finished__eBg9d","step-current":"exporter_step-current__oh5Mc","step-index":"exporter_step-index__bWRYR","step-name":"exporter_step-name__aj81m","preview-actions":"exporter_preview-actions__EdSLJ","image-previewer":"exporter_image-previewer__uKfNQ","preview-body":"exporter_preview-body__qK5Zf","chat-info":"exporter_chat-info__N_j5m",icons:"exporter_icons__7WRoV",logo:"exporter_logo__zu13e","main-title":"exporter_main-title__jjxAd","sub-title":"exporter_sub-title__p1RCl","icon-space":"exporter_icon-space__u_tMK","chat-info-item":"exporter_chat-info-item__3D12j",message:"exporter_message__3aahS",avatar:"exporter_avatar__fGOtt",body:"exporter_body__gcKIl","message-assistant":"exporter_message-assistant__sDmHi","message-user":"exporter_message-user__2t254"}},70247:e=>{e.exports={"message-selector":"message-selector_message-selector__dOKbo","message-filter":"message-selector_message-filter__Q5XSd","search-bar":"message-selector_search-bar__4E5gq",actions:"message-selector_actions__MyZCT",messages:"message-selector_messages__GbOLr",message:"message-selector_message___TaV9","message-selected":"message-selector_message-selected__b3mDv",avatar:"message-selector_avatar__HCJ8t",body:"message-selector_body__rKEIZ",date:"message-selector_date__vc48w",content:"message-selector_content__Z9W8L"}}};