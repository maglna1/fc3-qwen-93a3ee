"use strict";exports.id=8250,exports.ids=[8250],exports.modules={37828:(t,e,r)=>{r.d(e,{diagram:()=>S});var a=r(27612),n=r(60741),i=r(85182),l=r(39222),s=r(52645),o=r(95710),d=r(11064),c=r(49500),h=r(79586),u={normal:function(t,e,r,a){var n=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").style("stroke-width",1).style("stroke-dasharray","1,0");h.bg(n,r[a+"Style"]),r[a+"Class"]&&n.attr("class",r[a+"Class"])},vee:function(t,e,r,a){var n=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 L 4 5 z").style("stroke-width",1).style("stroke-dasharray","1,0");h.bg(n,r[a+"Style"]),r[a+"Class"]&&n.attr("class",r[a+"Class"])},undirected:function(t,e,r,a){var n=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M 0 5 L 10 5").style("stroke-width",1).style("stroke-dasharray","1,0");h.bg(n,r[a+"Style"]),r[a+"Class"]&&n.attr("class",r[a+"Class"])}},g=r(30499);function addLabel(t,e,r){var a,n=e.label,i=t.append("g");"svg"===e.labelType?(i.node().appendChild(e.label),h.bg(i,e.labelStyle)):"string"!=typeof n||"html"===e.labelType?(0,g.a)(i,e):function(t,e){for(var r=t.append("text"),a=(function(t){for(var e,r="",a=!1,n=0;n<t.length;++n)(e=t[n],a)?("n"===e?r+="\n":r+=e,a=!1):"\\"===e?a=!0:r+=e;return r})(e.label).split("\n"),n=0;n<a.length;n++)r.append("tspan").attr("xml:space","preserve").attr("dy","1em").attr("x","1").text(a[n]);return h.bg(r,e.labelStyle),r}(i,e);var l=i.node().getBBox();switch(r){case"top":a=-e.height/2;break;case"bottom":a=e.height/2-l.height;break;default:a=-l.height/2}return i.attr("transform","translate("+-l.width/2+","+a+")"),i}var createClusters=function(t,e){var r=e.nodes().filter(function(t){return h.bF(e,t)}),a=t.selectAll("g.cluster").data(r,function(t){return t});h.WR(a.exit(),e).style("opacity",0).remove();var n=a.enter().append("g").attr("class","cluster").attr("id",function(t){return e.node(t).id}).style("opacity",0).each(function(t){var r=e.node(t),a=i.Ys(this);i.Ys(this).append("rect"),addLabel(a.append("g").attr("class","label"),r,r.clusterLabelPos)});return a=a.merge(n),(a=h.WR(a,e).style("opacity",1)).selectAll("rect").each(function(t){var r=e.node(t),a=i.Ys(this);h.bg(a,r.style)}),a};let createEdgeLabels=function(t,e){var r,a=t.selectAll("g.edgeLabel").data(e.edges(),function(t){return h.O1(t)}).classed("update",!0);return a.exit().remove(),a.enter().append("g").classed("edgeLabel",!0).style("opacity",0),(a=t.selectAll("g.edgeLabel")).each(function(t){var r=i.Ys(this);r.select(".label").remove();var a=e.edge(t),n=addLabel(r,e.edge(t),0).classed("label",!0),l=n.node().getBBox();a.labelId&&n.attr("id",a.labelId),s.Z(a,"width")||(a.width=l.width),s.Z(a,"height")||(a.height=l.height)}),r=a.exit?a.exit():a.selectAll(null),h.WR(r,e).style("opacity",0).remove(),a};var p=r(15552),f=r(35712);function intersectNode(t,e){return t.intersect(e)}var createEdgePaths=function(t,e,r){var a,n=t.selectAll("g.edgePath").data(e.edges(),function(t){return h.O1(t)}).classed("update",!0),l=((a=n.enter().append("g").attr("class","edgePath").style("opacity",0)).append("path").attr("class","path").attr("d",function(t){var r=e.edge(t),a=e.node(t.v).elem,n=f.Z(r.points.length).map(function(){var t,e;return t=a.getBBox(),{x:(e=a.ownerSVGElement.getScreenCTM().inverse().multiply(a.getScreenCTM()).translate(t.width/2,t.height/2)).e,y:e.f}});return createLine(r,n)}),a.append("defs"),a);(function(t,e){var r=t.exit();h.WR(r,e).style("opacity",0).remove()})(n,e);var s=void 0!==n.merge?n.merge(l):n;return h.WR(s,e).style("opacity",1),s.each(function(t){var r=i.Ys(this),a=e.edge(t);a.elem=this,a.id&&r.attr("id",a.id),h.$p(r,a.class,(r.classed("update")?"update ":"")+"edgePath")}),s.selectAll("path.path").each(function(t){var r=e.edge(t);r.arrowheadId=p.Z("arrowhead");var a=i.Ys(this).attr("marker-end",function(){var t,e;return"url("+(t=location.href,e=r.arrowheadId,t.split("#")[0]+"#"+e)+")"}).style("fill","none");h.WR(a,e).attr("d",function(t){var r,a,n,i;return r=e.edge(t),a=e.node(t.v),n=e.node(t.w),(i=r.points.slice(1,r.points.length-1)).unshift(intersectNode(a,i[0])),i.push(intersectNode(n,i[i.length-1])),createLine(r,i)}),h.bg(a,r.style)}),s.selectAll("defs *").remove(),s.selectAll("defs").each(function(t){var a=e.edge(t);(0,r[a.arrowhead])(i.Ys(this),a.arrowheadId,a,"arrowhead")}),s};function createLine(t,e){var r=(i.jvg||i.YPS.line)().x(function(t){return t.x}).y(function(t){return t.y});return(r.curve||r.interpolate)(t.curve),r(e)}var y=r(22406),createNodes=function(t,e,r){var a,n=e.nodes().filter(function(t){return!h.bF(e,t)}),l=t.selectAll("g.node").data(n,function(t){return t}).classed("update",!0);return l.exit().remove(),l.enter().append("g").attr("class","node").style("opacity",0),(l=t.selectAll("g.node")).each(function(t){var a=e.node(t),n=i.Ys(this);h.$p(n,a.class,(n.classed("update")?"update ":"")+"node"),n.select("g.label").remove();var l=n.append("g").attr("class","label"),o=addLabel(l,a),d=r[a.shape],c=y.Z(o.node().getBBox(),"width","height");a.elem=this,a.id&&n.attr("id",a.id),a.labelId&&l.attr("id",a.labelId),s.Z(a,"width")&&(c.width=a.width),s.Z(a,"height")&&(c.height=a.height),c.width+=a.paddingLeft+a.paddingRight,c.height+=a.paddingTop+a.paddingBottom,l.attr("transform","translate("+(a.paddingLeft-a.paddingRight)/2+","+(a.paddingTop-a.paddingBottom)/2+")");var u=i.Ys(this);u.select(".label-container").remove();var g=d(u,c,a).classed("label-container",!0);h.bg(g,a.style);var p=g.node().getBBox();a.width=p.width,a.height=p.height}),a=l.exit?l.exit():l.selectAll(null),h.WR(a,e).style("opacity",0).remove(),l};function intersectEllipse(t,e,r,a){var n=t.x,i=t.y,l=n-a.x,s=i-a.y,o=Math.sqrt(e*e*s*s+r*r*l*l),d=Math.abs(e*r*l/o);a.x<n&&(d=-d);var c=Math.abs(e*r*s/o);return a.y<i&&(c=-c),{x:n+d,y:i+c}}function intersectPolygon(t,e,r){var a=t.x,n=t.y,i=[],l=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;e.forEach(function(t){l=Math.min(l,t.x),s=Math.min(s,t.y)});for(var o=a-t.width/2-l,d=n-t.height/2-s,c=0;c<e.length;c++){var h=e[c],u=e[c<e.length-1?c+1:0],g=function(t,e,r,a){var n,i,l,s,o,d,c,h,u,g,p,f,y;if(n=e.y-t.y,l=t.x-e.x,o=e.x*t.y-t.x*e.y,u=n*r.x+l*r.y+o,g=n*a.x+l*a.y+o,(0===u||0===g||!(u*g>0))&&(i=a.y-r.y,s=r.x-a.x,d=a.x*r.y-r.x*a.y,c=i*t.x+s*t.y+d,h=i*e.x+s*e.y+d,!(0!==c&&0!==h&&c*h>0)&&0!=(p=n*s-i*l)))return f=Math.abs(p/2),{x:(y=l*d-s*o)<0?(y-f)/p:(y+f)/p,y:(y=i*o-n*d)<0?(y-f)/p:(y+f)/p}}(t,r,{x:o+h.x,y:d+h.y},{x:o+u.x,y:d+u.y});g&&i.push(g)}return i.length?(i.length>1&&i.sort(function(t,e){var a=t.x-r.x,n=t.y-r.y,i=Math.sqrt(a*a+n*n),l=e.x-r.x,s=e.y-r.y,o=Math.sqrt(l*l+s*s);return i<o?-1:i===o?0:1}),i[0]):(console.log("NO INTERSECTION FOUND, RETURN NODE CENTER",t),t)}function intersectRect(t,e){var r,a,n=t.x,i=t.y,l=e.x-n,s=e.y-i,o=t.width/2,d=t.height/2;return Math.abs(s)*o>Math.abs(l)*d?(s<0&&(d=-d),r=0===s?0:d*l/s,a=d):(l<0&&(o=-o),r=o,a=0===l?0:o*s/l),{x:n+r,y:i+a}}var b={rect:function(t,e,r){var a=t.insert("rect",":first-child").attr("rx",r.rx).attr("ry",r.ry).attr("x",-e.width/2).attr("y",-e.height/2).attr("width",e.width).attr("height",e.height);return r.intersect=function(t){return intersectRect(r,t)},a},ellipse:function(t,e,r){var a=e.width/2,n=e.height/2,i=t.insert("ellipse",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("rx",a).attr("ry",n);return r.intersect=function(t){return intersectEllipse(r,a,n,t)},i},circle:function(t,e,r){var a=Math.max(e.width,e.height)/2,n=t.insert("circle",":first-child").attr("x",-e.width/2).attr("y",-e.height/2).attr("r",a);return r.intersect=function(t){return intersectEllipse(r,a,a,t)},n},diamond:function(t,e,r){var a=e.width*Math.SQRT2/2,n=e.height*Math.SQRT2/2,i=[{x:0,y:-n},{x:-a,y:0},{x:0,y:n},{x:a,y:0}],l=t.insert("polygon",":first-child").attr("points",i.map(function(t){return t.x+","+t.y}).join(" "));return r.intersect=function(t){return intersectPolygon(r,i,t)},l}};function render(){var fn=function(t,e){e.nodes().forEach(function(t){var r=e.node(t);s.Z(r,"label")||e.children(t).length||(r.label=t),s.Z(r,"paddingX")&&o.Z(r,{paddingLeft:r.paddingX,paddingRight:r.paddingX}),s.Z(r,"paddingY")&&o.Z(r,{paddingTop:r.paddingY,paddingBottom:r.paddingY}),s.Z(r,"padding")&&o.Z(r,{paddingLeft:r.padding,paddingRight:r.padding,paddingTop:r.padding,paddingBottom:r.padding}),o.Z(r,x),d.Z(["paddingLeft","paddingRight","paddingTop","paddingBottom"],function(t){r[t]=Number(r[t])}),s.Z(r,"width")&&(r._prevWidth=r.width),s.Z(r,"height")&&(r._prevHeight=r.height)}),e.edges().forEach(function(t){var r=e.edge(t);s.Z(r,"label")||(r.label=""),o.Z(r,w)});var r=createOrSelectGroup(t,"output"),a=createOrSelectGroup(r,"clusters"),n=createOrSelectGroup(r,"edgePaths"),l=createEdgeLabels(createOrSelectGroup(r,"edgeLabels"),e),g=createNodes(createOrSelectGroup(r,"nodes"),e,b);(0,c.bK)(e),function(t,e){function translate(t){var r=e.node(t);return"translate("+r.x+","+r.y+")"}t.filter(function(){return!i.Ys(this).classed("update")}).attr("transform",translate),h.WR(t,e).style("opacity",1).attr("transform",translate)}(g,e),function(t,e){function translate(t){var r=e.edge(t);return s.Z(r,"x")?"translate("+r.x+","+r.y+")":""}t.filter(function(){return!i.Ys(this).classed("update")}).attr("transform",translate),h.WR(t,e).style("opacity",1).attr("transform",translate)}(l,e),createEdgePaths(n,e,u),function(t,e){var r=t.filter(function(){return!i.Ys(this).classed("update")});function translate(t){var r=e.node(t);return"translate("+r.x+","+r.y+")"}r.attr("transform",translate),h.WR(t,e).style("opacity",1).attr("transform",translate),h.WR(r.selectAll("rect"),e).attr("width",function(t){return e.node(t).width}).attr("height",function(t){return e.node(t).height}).attr("x",function(t){return-e.node(t).width/2}).attr("y",function(t){return-e.node(t).height/2})}(createClusters(a,e),e),d.Z(e.nodes(),function(t){var r=e.node(t);s.Z(r,"_prevWidth")?r.width=r._prevWidth:delete r.width,s.Z(r,"_prevHeight")?r.height=r._prevHeight:delete r.height,delete r._prevWidth,delete r._prevHeight})};return fn.createNodes=function(t){return arguments.length?(createNodes=t,fn):createNodes},fn.createClusters=function(t){return arguments.length?(createClusters=t,fn):createClusters},fn.createEdgeLabels=function(t){return arguments.length?(createEdgeLabels=t,fn):createEdgeLabels},fn.createEdgePaths=function(t){return arguments.length?(createEdgePaths=t,fn):createEdgePaths},fn.shapes=function(t){return arguments.length?(b=t,fn):b},fn.arrows=function(t){return arguments.length?(u=t,fn):u},fn}var x={paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rx:0,ry:0,shape:"rect"},w={arrowhead:"normal",curve:i.c_6};function createOrSelectGroup(t,e){var r=t.select("g."+e);return r.empty()&&(r=t.append("g").attr("class",e)),r}var v=r(60180);function question(t,e,r){let a=e.width,n=e.height,i=(a+n)*.9,l=[{x:i/2,y:0},{x:i,y:-i/2},{x:i/2,y:-i},{x:0,y:-i/2}],s=insertPolygonShape(t,i,i,l);return r.intersect=function(t){return intersectPolygon(r,l,t)},s}function hexagon(t,e,r){let a=e.height,n=a/4,i=e.width+2*n,l=[{x:n,y:0},{x:i-n,y:0},{x:i,y:-a/2},{x:i-n,y:-a},{x:n,y:-a},{x:0,y:-a/2}],s=insertPolygonShape(t,i,a,l);return r.intersect=function(t){return intersectPolygon(r,l,t)},s}function rect_left_inv_arrow(t,e,r){let a=e.width,n=e.height,i=[{x:-n/2,y:0},{x:a,y:0},{x:a,y:-n},{x:-n/2,y:-n},{x:0,y:-n/2}],l=insertPolygonShape(t,a,n,i);return r.intersect=function(t){return intersectPolygon(r,i,t)},l}function lean_right(t,e,r){let a=e.width,n=e.height,i=[{x:-2*n/6,y:0},{x:a-n/6,y:0},{x:a+2*n/6,y:-n},{x:n/6,y:-n}],l=insertPolygonShape(t,a,n,i);return r.intersect=function(t){return intersectPolygon(r,i,t)},l}function lean_left(t,e,r){let a=e.width,n=e.height,i=[{x:2*n/6,y:0},{x:a+n/6,y:0},{x:a-2*n/6,y:-n},{x:-n/6,y:-n}],l=insertPolygonShape(t,a,n,i);return r.intersect=function(t){return intersectPolygon(r,i,t)},l}function trapezoid(t,e,r){let a=e.width,n=e.height,i=[{x:-2*n/6,y:0},{x:a+2*n/6,y:0},{x:a-n/6,y:-n},{x:n/6,y:-n}],l=insertPolygonShape(t,a,n,i);return r.intersect=function(t){return intersectPolygon(r,i,t)},l}function inv_trapezoid(t,e,r){let a=e.width,n=e.height,i=[{x:n/6,y:0},{x:a-n/6,y:0},{x:a+2*n/6,y:-n},{x:-2*n/6,y:-n}],l=insertPolygonShape(t,a,n,i);return r.intersect=function(t){return intersectPolygon(r,i,t)},l}function rect_right_inv_arrow(t,e,r){let a=e.width,n=e.height,i=[{x:0,y:0},{x:a+n/2,y:0},{x:a,y:-n/2},{x:a+n/2,y:-n},{x:0,y:-n}],l=insertPolygonShape(t,a,n,i);return r.intersect=function(t){return intersectPolygon(r,i,t)},l}function stadium(t,e,r){let a=e.height,n=e.width+a/4,i=t.insert("rect",":first-child").attr("rx",a/2).attr("ry",a/2).attr("x",-n/2).attr("y",-a/2).attr("width",n).attr("height",a);return r.intersect=function(t){return intersectRect(r,t)},i}function subroutine(t,e,r){let a=e.width,n=e.height,i=[{x:0,y:0},{x:a,y:0},{x:a,y:-n},{x:0,y:-n},{x:0,y:0},{x:-8,y:0},{x:a+8,y:0},{x:a+8,y:-n},{x:-8,y:-n},{x:-8,y:0}],l=insertPolygonShape(t,a,n,i);return r.intersect=function(t){return intersectPolygon(r,i,t)},l}function cylinder(t,e,r){let a=e.width,n=a/2,i=n/(2.5+a/50),l=e.height+i,s="M 0,"+i+" a "+n+","+i+" 0,0,0 "+a+" 0 a "+n+","+i+" 0,0,0 "+-a+" 0 l 0,"+l+" a "+n+","+i+" 0,0,0 "+a+" 0 l 0,"+-l,o=t.attr("label-offset-y",i).insert("path",":first-child").attr("d",s).attr("transform","translate("+-a/2+","+-(l/2+i)+")");return r.intersect=function(t){let e=intersectRect(r,t),a=e.x-r.x;if(0!=n&&(Math.abs(a)<r.width/2||Math.abs(a)==r.width/2&&Math.abs(e.y-r.y)>r.height/2-i)){let l=i*i*(1-a*a/(n*n));0!=l&&(l=Math.sqrt(l)),l=i-l,t.y-r.y>0&&(l=-l),e.y+=l}return e},o}function insertPolygonShape(t,e,r,a){return t.insert("polygon",":first-child").attr("points",a.map(function(t){return t.x+","+t.y}).join(" ")).attr("transform","translate("+-e/2+","+r/2+")")}r(12905),r(83689),r(46535),r(82059),r(7015);let m={addToRender:function(t){t.shapes().question=question,t.shapes().hexagon=hexagon,t.shapes().stadium=stadium,t.shapes().subroutine=subroutine,t.shapes().cylinder=cylinder,t.shapes().rect_left_inv_arrow=rect_left_inv_arrow,t.shapes().lean_right=lean_right,t.shapes().lean_left=lean_left,t.shapes().trapezoid=trapezoid,t.shapes().inv_trapezoid=inv_trapezoid,t.shapes().rect_right_inv_arrow=rect_right_inv_arrow},addToRenderV2:function(t){t({question}),t({hexagon}),t({stadium}),t({subroutine}),t({cylinder}),t({rect_left_inv_arrow}),t({lean_right}),t({lean_left}),t({trapezoid}),t({inv_trapezoid}),t({rect_right_inv_arrow})}},k={},addVertices=async function(t,e,r,a,n,s){let o=a?a.select(`[id="${r}"]`):(0,i.Ys)(`[id="${r}"]`),d=n||document,c=Object.keys(t);for(let r of c){let a;let n=t[r],i="default";n.classes.length>0&&(i=n.classes.join(" "));let c=(0,l.k)(n.styles),h=void 0!==n.text?n.text:n.id;if((0,l.m)((0,l.c)().flowchart.htmlLabels)){let t={label:await (0,l.r)(h.replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`),(0,l.c)())};(a=(0,g.a)(o,t).node()).parentNode.removeChild(a)}else{let t=d.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",c.labelStyle.replace("color:","fill:"));let e=h.split(l.e.lineBreakRegex);for(let r of e){let e=d.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.setAttribute("dy","1em"),e.setAttribute("x","1"),e.textContent=r,t.appendChild(e)}a=t}let u=0,p="";switch(n.type){case"round":u=5,p="rect";break;case"square":case"group":default:p="rect";break;case"diamond":p="question";break;case"hexagon":p="hexagon";break;case"odd":case"odd_right":p="rect_left_inv_arrow";break;case"lean_right":p="lean_right";break;case"lean_left":p="lean_left";break;case"trapezoid":p="trapezoid";break;case"inv_trapezoid":p="inv_trapezoid";break;case"circle":p="circle";break;case"ellipse":p="ellipse";break;case"stadium":p="stadium";break;case"subroutine":p="subroutine";break;case"cylinder":p="cylinder"}l.l.warn("Adding node",n.id,n.domId),e.setNode(s.db.lookUpDomId(n.id),{labelType:"svg",labelStyle:c.labelStyle,shape:p,label:a,rx:u,ry:u,class:i,style:c.style,id:s.db.lookUpDomId(n.id)})}},addEdges=async function(t,e,r){let a,n,s=0;if(void 0!==t.defaultStyle){let e=(0,l.k)(t.defaultStyle);a=e.style,n=e.labelStyle}for(let o of t){s++;let d="L-"+o.start+"-"+o.end,c="LS-"+o.start,h="LE-"+o.end,u={};"arrow_open"===o.type?u.arrowhead="none":u.arrowhead="normal";let g="",p="";if(void 0!==o.style){let t=(0,l.k)(o.style);g=t.style,p=t.labelStyle}else switch(o.stroke){case"normal":g="fill:none",void 0!==a&&(g=a),void 0!==n&&(p=n);break;case"dotted":g="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":g=" stroke-width: 3.5px;fill:none"}u.style=g,u.labelStyle=p,void 0!==o.interpolate?u.curve=(0,l.n)(o.interpolate,i.c_6):void 0!==t.defaultInterpolate?u.curve=(0,l.n)(t.defaultInterpolate,i.c_6):u.curve=(0,l.n)(k.curve,i.c_6),void 0===o.text?void 0!==o.style&&(u.arrowheadStyle="fill: #333"):(u.arrowheadStyle="fill: #333",u.labelpos="c",(0,l.m)((0,l.c)().flowchart.htmlLabels)?(u.labelType="html",u.label=`<span id="L-${d}" class="edgeLabel L-${c}' L-${h}" style="${u.labelStyle}">${await (0,l.r)(o.text.replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`),(0,l.c)())}</span>`):(u.labelType="text",u.label=o.text.replace(l.e.lineBreakRegex,"\n"),void 0===o.style&&(u.style=u.style||"stroke: #333; stroke-width: 1.5px;fill:none"),u.labelStyle=u.labelStyle.replace("color:","fill:"))),u.id=d,u.class=c+" "+h,u.minlen=o.length||1,e.setEdge(r.db.lookUpDomId(o.start),r.db.lookUpDomId(o.end),u,s)}},draw=async function(t,e,r,a){let s,o;l.l.info("Drawing flowchart");let{securityLevel:d,flowchart:c}=(0,l.c)();"sandbox"===d&&(s=(0,i.Ys)("#i"+e));let u="sandbox"===d?(0,i.Ys)(s.nodes()[0].contentDocument.body):(0,i.Ys)("body"),g="sandbox"===d?s.nodes()[0].contentDocument:document,p=a.db.getDirection();void 0===p&&(p="TD");let f=c.nodeSpacing||50,y=c.rankSpacing||50,b=new n.k({multigraph:!0,compound:!0}).setGraph({rankdir:p,nodesep:f,ranksep:y,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),x=a.db.getSubGraphs();for(let t=x.length-1;t>=0;t--)o=x[t],a.db.addVertex(o.id,o.title,"group",void 0,o.classes);let w=a.db.getVertices();l.l.warn("Get vertices",w);let v=a.db.getEdges(),k=0;for(k=x.length-1;k>=0;k--){o=x[k],(0,i.td_)("cluster").append("text");for(let t=0;t<o.nodes.length;t++)l.l.warn("Setting subgraph",o.nodes[t],a.db.lookUpDomId(o.nodes[t]),a.db.lookUpDomId(o.id)),b.setParent(a.db.lookUpDomId(o.nodes[t]),a.db.lookUpDomId(o.id))}await addVertices(w,b,e,u,g,a),await addEdges(v,b,a);let _=new render;m.addToRender(_),_.arrows().none=function(t,e,r,a){let n=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto"),i=n.append("path").attr("d","M 0 0 L 0 0 L 0 0 z");(0,h.bg)(i,r[a+"Style"])},_.arrows().normal=function(t,e){let r=t.append("marker").attr("id",e).attr("viewBox","0 0 10 10").attr("refX",9).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",8).attr("markerHeight",6).attr("orient","auto");r.append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowheadPath").style("stroke-width",1).style("stroke-dasharray","1,0")};let S=u.select(`[id="${e}"]`),L=u.select("#"+e+" g");for(_(L,b),L.selectAll("g.node").attr("title",function(){return a.db.getTooltip(this.id)}),a.db.indexNodes("subGraph"+k),k=0;k<x.length;k++)if("undefined"!==(o=x[k]).title){let t=g.querySelectorAll("#"+e+' [id="'+a.db.lookUpDomId(o.id)+'"] rect'),r=g.querySelectorAll("#"+e+' [id="'+a.db.lookUpDomId(o.id)+'"]'),n=t[0].x.baseVal.value,l=t[0].y.baseVal.value,s=t[0].width.baseVal.value,d=(0,i.Ys)(r[0]),c=d.select(".label");c.attr("transform",`translate(${n+s/2}, ${l+14})`),c.attr("id",e+"Text");for(let t=0;t<o.classes.length;t++)r[0].classList.add(o.classes[t])}if(!c.htmlLabels){let t=g.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(let e of t){let t=e.getBBox(),r=g.createElementNS("http://www.w3.org/2000/svg","rect");r.setAttribute("rx",0),r.setAttribute("ry",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height),e.insertBefore(r,e.firstChild)}}(0,l.o)(b,S,c.diagramPadding,c.useMaxWidth);let E=Object.keys(w);E.forEach(function(t){let r=w[t];if(r.link){let n=u.select("#"+e+' [id="'+a.db.lookUpDomId(t)+'"]');if(n){let t=g.createElementNS("http://www.w3.org/2000/svg","a");t.setAttributeNS("http://www.w3.org/2000/svg","class",r.classes.join(" ")),t.setAttributeNS("http://www.w3.org/2000/svg","href",r.link),t.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===d?t.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):r.linkTarget&&t.setAttributeNS("http://www.w3.org/2000/svg","target",r.linkTarget);let e=n.insert(function(){return t},":first-child"),a=n.select(".label-container");a&&e.append(function(){return a.node()});let i=n.select(".label");i&&e.append(function(){return i.node()})}}})},_={setConf:function(t){let e=Object.keys(t);for(let r of e)k[r]=t[r]},addVertices,addEdges,getClasses:function(t,e){return l.l.info("Extracting classes"),e.db.getClasses()},draw},S={parser:a.p,db:a.f,renderer:v.f,styles:v.a,init:t=>{t.flowchart||(t.flowchart={}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,_.setConf(t.flowchart),a.f.clear(),a.f.setGen("gen-1")}}}};